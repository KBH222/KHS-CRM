{"version":3,"file":"PracticalSecurity-D5DzxMxf.js","sources":["../../src/types/dataSyncPolicy.ts","../../src/services/practicalEncryption.ts","../../src/pages/PracticalSecurity.tsx"],"sourcesContent":["// Practical Data Sync Policy for Construction Business\n// Balances real-world needs with appropriate security\n\nexport interface FieldSyncPolicy {\n  sync: 'yes' | 'no';\n  encrypted?: boolean;\n  reason?: string;\n}\n\nexport interface SyncPolicy {\n  [key: string]: FieldSyncPolicy | { [field: string]: FieldSyncPolicy };\n}\n\n// Realistic sync policy for construction business\nexport const SYNC_POLICY: SyncPolicy = {\n  customers: {\n    // Business-relevant information (safe to sync)\n    name: { sync: 'yes', reason: 'Public record, needed for business' },\n    address: { sync: 'yes', reason: 'Public record, job site location' },\n    phone: { sync: 'yes', reason: 'Business contact information' },\n    email: { sync: 'yes', reason: 'Business communication' },\n    reference: { sync: 'yes', reason: 'Lead source tracking' },\n    notes: { sync: 'yes', reason: 'General job notes' },\n    \n    // Truly sensitive fields (keep local)\n    paymentMethod: { sync: 'no', encrypted: true, reason: 'Financial data' },\n    creditCard: { sync: 'no', encrypted: true, reason: 'Payment information' },\n    bankAccount: { sync: 'no', encrypted: true, reason: 'Banking details' },\n    ssn: { sync: 'no', encrypted: true, reason: 'Personal identifier' },\n    privateNotes: { sync: 'no', reason: 'Confidential information' },\n    pricing: { sync: 'no', encrypted: true, reason: 'Business margins' },\n  },\n  \n  jobs: {\n    // Project information (safe to sync)\n    title: { sync: 'yes', reason: 'Job identification' },\n    description: { sync: 'yes', reason: 'Work scope' },\n    location: { sync: 'yes', reason: 'Job site address' },\n    startDate: { sync: 'yes', reason: 'Schedule coordination' },\n    endDate: { sync: 'yes', reason: 'Timeline management' },\n    status: { sync: 'yes', reason: 'Progress tracking' },\n    materials: { sync: 'yes', reason: 'Supply management' },\n    assignedTo: { sync: 'yes', reason: 'Worker assignments' },\n    photos: { sync: 'yes', reason: 'Progress documentation' },\n    documents: { sync: 'yes', reason: 'Plans and permits' },\n    comments: { sync: 'yes', reason: 'Team communication' },\n    \n    // Financial fields (keep local)\n    totalCost: { sync: 'no', encrypted: true, reason: 'Pricing information' },\n    laborCost: { sync: 'no', encrypted: true, reason: 'Internal costs' },\n    materialCost: { sync: 'no', encrypted: true, reason: 'Supplier pricing' },\n    margin: { sync: 'no', encrypted: true, reason: 'Profit margins' },\n    invoiceDetails: { sync: 'no', encrypted: true, reason: 'Billing information' },\n  },\n  \n  workers: {\n    // Work-related information (safe to sync)\n    name: { sync: 'yes', reason: 'Team identification' },\n    phone: { sync: 'yes', reason: 'Work communication' },\n    email: { sync: 'yes', reason: 'Team updates' },\n    skills: { sync: 'yes', reason: 'Task assignment' },\n    schedule: { sync: 'yes', reason: 'Availability tracking' },\n    \n    // Personal information (keep local)\n    ssn: { sync: 'no', encrypted: true, reason: 'Legal requirement' },\n    wage: { sync: 'no', encrypted: true, reason: 'Payroll confidential' },\n    emergencyContact: { sync: 'no', reason: 'Private information' },\n    medicalInfo: { sync: 'no', encrypted: true, reason: 'HIPAA protected' },\n  },\n  \n  materials: {\n    // Inventory information (safe to sync)\n    name: { sync: 'yes', reason: 'Material tracking' },\n    quantity: { sync: 'yes', reason: 'Inventory management' },\n    supplier: { sync: 'yes', reason: 'Ordering information' },\n    location: { sync: 'yes', reason: 'Storage tracking' },\n    \n    // Pricing (keep local)\n    cost: { sync: 'no', encrypted: true, reason: 'Supplier pricing' },\n    markup: { sync: 'no', encrypted: true, reason: 'Profit margins' },\n  },\n};\n\n// Helper to check if a field should sync\nexport function shouldSyncField(\n  category: string, \n  field: string\n): boolean {\n  const categoryPolicy = SYNC_POLICY[category];\n  if (!categoryPolicy || typeof categoryPolicy === 'object' && 'sync' in categoryPolicy) {\n    return false;\n  }\n  \n  const fieldPolicy = categoryPolicy[field];\n  return fieldPolicy?.sync === 'yes';\n}\n\n// Helper to check if a field needs encryption\nexport function needsEncryption(\n  category: string, \n  field: string\n): boolean {\n  const categoryPolicy = SYNC_POLICY[category];\n  if (!categoryPolicy || typeof categoryPolicy === 'object' && 'sync' in categoryPolicy) {\n    return false;\n  }\n  \n  const fieldPolicy = categoryPolicy[field];\n  return fieldPolicy?.encrypted === true;\n}\n\n// Filter object for syncing (removes local-only fields)\nexport function filterForSync<T extends Record<string, any>>(\n  data: T,\n  category: string\n): Partial<T> {\n  const filtered: Partial<T> = {};\n  \n  for (const [key, value] of Object.entries(data)) {\n    if (shouldSyncField(category, key)) {\n      filtered[key as keyof T] = value;\n    }\n  }\n  \n  return filtered;\n}\n\n// Extract local-only fields\nexport function extractLocalOnly<T extends Record<string, any>>(\n  data: T,\n  category: string\n): Partial<T> {\n  const localOnly: Partial<T> = {};\n  \n  for (const [key, value] of Object.entries(data)) {\n    if (!shouldSyncField(category, key)) {\n      localOnly[key as keyof T] = value;\n    }\n  }\n  \n  return localOnly;\n}","// Practical Encryption Service - Only for Financial Data\n// Uses simple encryption for genuinely sensitive information\n\nimport { needsEncryption } from '../types/dataSyncPolicy';\n\nclass PracticalEncryptionService {\n  private password: string | null = null;\n\n  // Set password for encryption (simplified)\n  setPassword(password: string): void {\n    this.password = password;\n  }\n\n  // Check if ready to encrypt\n  isReady(): boolean {\n    return this.password !== null;\n  }\n\n  // Simple XOR encryption for financial data (production should use proper crypto)\n  encrypt(data: string): string {\n    if (!this.password) return data;\n    \n    let result = '';\n    for (let i = 0; i < data.length; i++) {\n      result += String.fromCharCode(\n        data.charCodeAt(i) ^ this.password.charCodeAt(i % this.password.length)\n      );\n    }\n    return btoa(result); // Base64 encode\n  }\n\n  // Simple XOR decryption\n  decrypt(data: string): string {\n    if (!this.password) return data;\n    \n    try {\n      const decoded = atob(data); // Base64 decode\n      let result = '';\n      for (let i = 0; i < decoded.length; i++) {\n        result += String.fromCharCode(\n          decoded.charCodeAt(i) ^ this.password.charCodeAt(i % this.password.length)\n        );\n      }\n      return result;\n    } catch {\n      return data; // Return as-is if decryption fails\n    }\n  }\n\n  // Encrypt only financial fields in an object\n  encryptObject<T extends Record<string, any>>(\n    obj: T, \n    category: string\n  ): T {\n    if (!this.isReady()) return obj;\n\n    const encrypted = { ...obj };\n    \n    for (const [key, value] of Object.entries(obj)) {\n      if (needsEncryption(category, key) && typeof value === 'string') {\n        encrypted[key] = this.encrypt(value);\n      } else if (needsEncryption(category, key) && typeof value === 'number') {\n        encrypted[key] = this.encrypt(value.toString());\n      }\n    }\n    \n    return encrypted;\n  }\n\n  // Decrypt only financial fields in an object\n  decryptObject<T extends Record<string, any>>(\n    obj: T, \n    category: string\n  ): T {\n    if (!this.isReady()) return obj;\n\n    const decrypted = { ...obj };\n    \n    for (const [key, value] of Object.entries(obj)) {\n      if (needsEncryption(category, key) && typeof value === 'string') {\n        const decryptedValue = this.decrypt(value);\n        // Try to convert back to number if it was originally a number\n        const numValue = parseFloat(decryptedValue);\n        decrypted[key] = isNaN(numValue) ? decryptedValue : numValue;\n      }\n    }\n    \n    return decrypted;\n  }\n\n  // Clear password\n  clear(): void {\n    this.password = null;\n  }\n}\n\n// Export singleton\nexport const practicalEncryption = new PracticalEncryptionService();\n\n// Helper to check if we should show encrypted data\nexport function shouldShowEncrypted(): boolean {\n  return practicalEncryption.isReady();\n}","import { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { practicalEncryption } from '../services/practicalEncryption';\nimport { authService } from '../services/authService';\n\nexport const PracticalSecurity = () => {\n  const navigate = useNavigate();\n  const [encryptionPassword, setEncryptionPassword] = useState('');\n  const [authEnabled, setAuthEnabled] = useState(false);\n  const [encryptionEnabled, setEncryptionEnabled] = useState(false);\n  const [message, setMessage] = useState<{ type: 'success' | 'error', text: string } | null>(null);\n\n  useEffect(() => {\n    // Check current status\n    setAuthEnabled(authService.isInitialized());\n    setEncryptionEnabled(practicalEncryption.isReady());\n  }, []);\n\n  const handleEnableEncryption = () => {\n    if (!encryptionPassword) {\n      setMessage({ type: 'error', text: 'Please enter a password for encryption' });\n      return;\n    }\n\n    practicalEncryption.setPassword(encryptionPassword);\n    setEncryptionEnabled(true);\n    setMessage({ type: 'success', text: 'Financial data encryption enabled' });\n    setEncryptionPassword('');\n  };\n\n  const handleDisableEncryption = () => {\n    practicalEncryption.clear();\n    setEncryptionEnabled(false);\n    setMessage({ type: 'success', text: 'Encryption disabled' });\n  };\n\n  const handleSkipAuth = () => {\n    localStorage.setItem('khs-crm-skip-auth', 'true');\n    setMessage({ type: 'success', text: 'Authentication disabled - app will open directly' });\n  };\n\n  const handleEnableAuth = () => {\n    localStorage.removeItem('khs-crm-skip-auth');\n    setMessage({ type: 'success', text: 'Authentication enabled - restart app to set up' });\n  };\n\n  return (\n    <div style={{ \n      padding: '20px',\n      maxWidth: '800px',\n      margin: '0 auto'\n    }}>\n      <div style={{ \n        display: 'flex', \n        justifyContent: 'space-between', \n        alignItems: 'center',\n        marginBottom: '20px'\n      }}>\n        <h1 style={{ margin: 0 }}>Practical Security Settings</h1>\n        <button \n          onClick={() => navigate(-1)}\n          style={{\n            padding: '8px 16px',\n            backgroundColor: '#E5E7EB',\n            border: 'none',\n            borderRadius: '6px',\n            cursor: 'pointer'\n          }}\n        >\n          Back\n        </button>\n      </div>\n\n      {message && (\n        <div style={{\n          padding: '12px',\n          backgroundColor: message.type === 'success' ? '#ECFDF5' : '#FEE2E2',\n          border: `1px solid ${message.type === 'success' ? '#10B981' : '#DC2626'}`,\n          borderRadius: '6px',\n          marginBottom: '20px',\n          color: message.type === 'success' ? '#064E3B' : '#991B1B'\n        }}>\n          {message.text}\n        </div>\n      )}\n\n      {/* Practical Approach */}\n      <div style={{\n        backgroundColor: '#EFF6FF',\n        padding: '20px',\n        borderRadius: '8px',\n        marginBottom: '20px'\n      }}>\n        <h2 style={{ margin: '0 0 12px 0', fontSize: '18px' }}>🔧 Practical Security Approach</h2>\n        <p style={{ margin: '0 0 12px 0', fontSize: '14px', color: '#1E40AF' }}>\n          This CRM uses a balanced security approach designed for real construction businesses:\n        </p>\n        <ul style={{ margin: 0, paddingLeft: '20px', fontSize: '14px', color: '#1E40AF' }}>\n          <li>Customer names, addresses, and job details sync via Google Drive (public record data)</li>\n          <li>Financial information (payments, pricing) stays encrypted on your device</li>\n          <li>Workers can access job sites and contact customers directly</li>\n          <li>Optional app password protection for device security</li>\n        </ul>\n      </div>\n\n      {/* Financial Data Encryption */}\n      <div style={{\n        backgroundColor: '#F9FAFB',\n        padding: '20px',\n        borderRadius: '8px',\n        marginBottom: '20px'\n      }}>\n        <h2 style={{ margin: '0 0 16px 0', fontSize: '18px' }}>💰 Financial Data Encryption</h2>\n        \n        {!encryptionEnabled ? (\n          <div>\n            <p style={{ margin: '0 0 16px 0', fontSize: '14px', color: '#6B7280' }}>\n              Enable encryption to protect pricing, payment methods, and financial details.\n            </p>\n            <div style={{ display: 'flex', gap: '12px', alignItems: 'center' }}>\n              <input\n                type=\"password\"\n                value={encryptionPassword}\n                onChange={(e) => setEncryptionPassword(e.target.value)}\n                placeholder=\"Enter encryption password\"\n                style={{\n                  padding: '8px 12px',\n                  border: '1px solid #D1D5DB',\n                  borderRadius: '6px',\n                  fontSize: '14px',\n                  flex: 1\n                }}\n              />\n              <button\n                onClick={handleEnableEncryption}\n                style={{\n                  padding: '8px 16px',\n                  backgroundColor: '#10B981',\n                  color: 'white',\n                  border: 'none',\n                  borderRadius: '6px',\n                  cursor: 'pointer',\n                  fontSize: '14px',\n                  fontWeight: '500'\n                }}\n              >\n                Enable Encryption\n              </button>\n            </div>\n          </div>\n        ) : (\n          <div>\n            <p style={{ margin: '0 0 16px 0', fontSize: '14px', color: '#059669' }}>\n              ✅ Financial data encryption is active\n            </p>\n            <button\n              onClick={handleDisableEncryption}\n              style={{\n                padding: '8px 16px',\n                backgroundColor: '#DC2626',\n                color: 'white',\n                border: 'none',\n                borderRadius: '6px',\n                cursor: 'pointer',\n                fontSize: '14px',\n                fontWeight: '500'\n              }}\n            >\n              Disable Encryption\n            </button>\n          </div>\n        )}\n      </div>\n\n      {/* App Password Protection */}\n      <div style={{\n        backgroundColor: '#F9FAFB',\n        padding: '20px',\n        borderRadius: '8px',\n        marginBottom: '20px'\n      }}>\n        <h2 style={{ margin: '0 0 16px 0', fontSize: '18px' }}>🔐 App Password Protection</h2>\n        \n        {authEnabled ? (\n          <div>\n            <p style={{ margin: '0 0 16px 0', fontSize: '14px', color: '#6B7280' }}>\n              App password is enabled. Users must log in to access the CRM.\n            </p>\n            <button\n              onClick={handleSkipAuth}\n              style={{\n                padding: '8px 16px',\n                backgroundColor: '#F59E0B',\n                color: 'white',\n                border: 'none',\n                borderRadius: '6px',\n                cursor: 'pointer',\n                fontSize: '14px',\n                fontWeight: '500'\n              }}\n            >\n              Disable Password (Direct Access)\n            </button>\n          </div>\n        ) : (\n          <div>\n            <p style={{ margin: '0 0 16px 0', fontSize: '14px', color: '#6B7280' }}>\n              App opens directly without password. Enable for device security.\n            </p>\n            <button\n              onClick={handleEnableAuth}\n              style={{\n                padding: '8px 16px',\n                backgroundColor: '#3B82F6',\n                color: 'white',\n                border: 'none',\n                borderRadius: '6px',\n                cursor: 'pointer',\n                fontSize: '14px',\n                fontWeight: '500'\n              }}\n            >\n              Enable Password Protection\n            </button>\n          </div>\n        )}\n      </div>\n\n      {/* Data Sync Overview */}\n      <div style={{\n        backgroundColor: '#F9FAFB',\n        padding: '20px',\n        borderRadius: '8px',\n        marginBottom: '20px'\n      }}>\n        <h2 style={{ margin: '0 0 16px 0', fontSize: '18px' }}>☁️ What Syncs vs What Stays Local</h2>\n        \n        <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '20px' }}>\n          <div>\n            <h3 style={{ margin: '0 0 12px 0', fontSize: '16px', color: '#059669' }}>\n              ✅ Syncs to Google Drive\n            </h3>\n            <ul style={{ margin: 0, paddingLeft: '20px', fontSize: '14px', color: '#6B7280' }}>\n              <li>Customer names & addresses</li>\n              <li>Phone numbers & emails</li>\n              <li>Job locations & descriptions</li>\n              <li>Task assignments</li>\n              <li>Material lists</li>\n              <li>Work schedules</li>\n              <li>Project photos</li>\n            </ul>\n          </div>\n          \n          <div>\n            <h3 style={{ margin: '0 0 12px 0', fontSize: '16px', color: '#DC2626' }}>\n              🔒 Stays Local Only\n            </h3>\n            <ul style={{ margin: 0, paddingLeft: '20px', fontSize: '14px', color: '#6B7280' }}>\n              <li>Payment methods</li>\n              <li>Credit card details</li>\n              <li>Bank account info</li>\n              <li>Job pricing & margins</li>\n              <li>Social Security Numbers</li>\n              <li>Employee wages</li>\n              <li>Private family notes</li>\n            </ul>\n          </div>\n        </div>\n      </div>\n\n      {/* Support Info */}\n      <div style={{\n        backgroundColor: '#FEF3C7',\n        padding: '20px',\n        borderRadius: '8px'\n      }}>\n        <h3 style={{ margin: '0 0 8px 0', fontSize: '16px', color: '#92400E' }}>\n          💡 Tips for Construction Businesses\n        </h3>\n        <ul style={{ margin: 0, paddingLeft: '20px', fontSize: '14px', color: '#92400E' }}>\n          <li>Enable financial encryption if you store payment info</li>\n          <li>Use app password if multiple people access your device</li>\n          <li>Google Drive sync lets workers see job details remotely</li>\n          <li>Customer contact info syncs so workers can call/navigate</li>\n        </ul>\n      </div>\n    </div>\n  );\n};"],"names":["SYNC_POLICY","needsEncryption","category","field","categoryPolicy","fieldPolicy","PracticalEncryptionService","__publicField","password","data","result","i","decoded","obj","encrypted","key","value","decrypted","decryptedValue","numValue","practicalEncryption","PracticalSecurity","navigate","useNavigate","encryptionPassword","setEncryptionPassword","useState","authEnabled","setAuthEnabled","encryptionEnabled","setEncryptionEnabled","message","setMessage","useEffect","authService","handleEnableEncryption","handleDisableEncryption","handleSkipAuth","handleEnableAuth","jsxs","jsx","e"],"mappings":"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"}