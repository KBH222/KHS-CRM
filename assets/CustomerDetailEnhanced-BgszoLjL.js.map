{"version":3,"file":"CustomerDetailEnhanced-BgszoLjL.js","sources":["../../src/pages/CustomerDetailEnhanced.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { customerStorage } from '../utils/localStorage';\n\nconst CustomerDetailEnhanced = () => {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  \n  // Load customer data from localStorage\n  const [customer, setCustomer] = useState(null);\n  \n  useEffect(() => {\n    const customers = customerStorage.getAll();\n    const foundCustomer = customers.find(c => c.id === id);\n    if (foundCustomer) {\n      setCustomer(foundCustomer);\n    } else {\n      // If customer not found, redirect to customers page\n      navigate('/customers');\n    }\n  }, [id, navigate]);\n\n  // For now, show empty jobs list - in a real app, this would load from a jobs service\n  const [jobs] = useState([]);\n\n  const handlePhoneClick = (e) => {\n    e.stopPropagation();\n    window.location.href = `tel:${customer.phone.replace(/\\D/g, '')}`;\n  };\n\n  const handleEmailClick = (e) => {\n    e.stopPropagation();\n    window.location.href = `mailto:${customer.email}`;\n  };\n\n  const handleAddressClick = (e) => {\n    e.stopPropagation();\n    const encodedAddress = encodeURIComponent(customer.address);\n    window.open(`https://www.google.com/maps/search/?api=1&query=${encodedAddress}`, '_blank');\n  };\n\n  const getStatusColor = (status) => {\n    switch (status) {\n      case 'Completed': return '#10B981';\n      case 'In Progress': return '#3B82F6';\n      case 'Quote': return '#F59E0B';\n      default: return '#6B7280';\n    }\n  };\n\n  const formatDate = (dateString) => {\n    if (!dateString) return 'Not set';\n    return new Date(dateString).toLocaleDateString('en-US', {\n      month: 'short',\n      day: 'numeric',\n      year: 'numeric'\n    });\n  };\n\n  if (!customer) {\n    return (\n      <div style={{ maxWidth: '800px', margin: '0 auto', padding: '20px', textAlign: 'center' }}>\n        <p>Loading customer details...</p>\n      </div>\n    );\n  }\n\n  return (\n    <div style={{ maxWidth: '800px', margin: '0 auto', padding: '20px' }}>\n      {/* Back Button */}\n      <button\n        onClick={() => navigate('/customers')}\n        style={{\n          marginBottom: '20px',\n          padding: '8px 16px',\n          backgroundColor: '#E5E7EB',\n          border: 'none',\n          borderRadius: '6px',\n          cursor: 'pointer',\n          display: 'flex',\n          alignItems: 'center',\n          gap: '8px',\n          fontSize: '14px'\n        }}\n      >\n        ‚Üê Back to Customers\n      </button>\n\n      {/* Customer Header */}\n      <div style={{\n        backgroundColor: 'white',\n        padding: '20px',\n        borderRadius: '8px',\n        boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\n        marginBottom: '20px'\n      }}>\n        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'start' }}>\n          <div>\n            <h1 style={{ margin: '0 0 10px 0', fontSize: '24px', fontWeight: 'bold' }}>\n              {customer.name}\n            </h1>\n            {customer.reference && (\n              <span style={{ \n                display: 'inline-block',\n                fontSize: '12px', \n                backgroundColor: '#E5E7EB',\n                color: '#374151',\n                padding: '4px 8px',\n                borderRadius: '4px',\n                marginBottom: '15px'\n              }}>\n                {customer.reference}\n              </span>\n            )}\n            <div style={{ display: 'flex', flexDirection: 'column', gap: '8px' }}>\n              <button\n                onClick={handleEmailClick}\n                style={{\n                  background: 'none',\n                  border: 'none',\n                  color: '#6B7280',\n                  cursor: 'pointer',\n                  padding: 0,\n                  fontSize: '14px',\n                  textAlign: 'left',\n                  textDecoration: 'none'\n                }}\n                onMouseEnter={(e) => {\n                  e.currentTarget.style.color = '#3B82F6';\n                  e.currentTarget.style.textDecoration = 'underline';\n                }}\n                onMouseLeave={(e) => {\n                  e.currentTarget.style.color = '#6B7280';\n                  e.currentTarget.style.textDecoration = 'none';\n                }}\n              >\n                {customer.email}\n              </button>\n              <button\n                onClick={handlePhoneClick}\n                style={{\n                  background: 'none',\n                  border: 'none',\n                  color: '#3B82F6',\n                  textDecoration: 'underline',\n                  cursor: 'pointer',\n                  padding: 0,\n                  fontSize: '16px',\n                  textAlign: 'left'\n                }}\n              >\n                {customer.phone}\n              </button>\n              <button\n                onClick={handleAddressClick}\n                style={{\n                  background: 'none',\n                  border: 'none',\n                  color: '#6B7280',\n                  cursor: 'pointer',\n                  padding: 0,\n                  fontSize: '14px',\n                  textAlign: 'left',\n                  textDecoration: 'none'\n                }}\n                onMouseEnter={(e) => {\n                  e.currentTarget.style.color = '#3B82F6';\n                  e.currentTarget.style.textDecoration = 'underline';\n                }}\n                onMouseLeave={(e) => {\n                  e.currentTarget.style.color = '#6B7280';\n                  e.currentTarget.style.textDecoration = 'none';\n                }}\n              >\n                {customer.address}\n              </button>\n            </div>\n            {customer.notes && (\n              <p style={{\n                marginTop: '15px',\n                fontSize: '14px',\n                color: '#6B7280',\n                fontStyle: 'italic',\n                borderTop: '1px solid #E5E7EB',\n                paddingTop: '15px'\n              }}>\n                {customer.notes}\n              </p>\n            )}\n          </div>\n          <div style={{ display: 'flex', gap: '10px' }}>\n            <button\n              onClick={() => navigate(`/customers/edit/${customer.id}`)}\n              style={{\n                padding: '8px 16px',\n                backgroundColor: '#E5E7EB',\n                border: 'none',\n                borderRadius: '6px',\n                cursor: 'pointer',\n                fontSize: '14px'\n              }}\n            >\n              Edit\n            </button>\n            <button\n              onClick={() => {\n                if (window.confirm('Are you sure you want to delete this customer?')) {\n                  // Delete logic here\n                  navigate('/customers');\n                }\n              }}\n              style={{\n                padding: '8px 16px',\n                backgroundColor: '#FEE2E2',\n                color: '#DC2626',\n                border: 'none',\n                borderRadius: '6px',\n                cursor: 'pointer',\n                fontSize: '14px'\n              }}\n            >\n              Delete\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Jobs Section */}\n      <div style={{ marginBottom: '20px' }}>\n        <div style={{ \n          display: 'flex', \n          justifyContent: 'space-between', \n          alignItems: 'center',\n          marginBottom: '15px'\n        }}>\n          <h2 style={{ fontSize: '20px', fontWeight: 'bold', margin: 0 }}>Jobs</h2>\n          <button\n            onClick={() => navigate(`/customers/${customer.id}/jobs/new`)}\n            style={{\n              padding: '8px 16px',\n              backgroundColor: '#3B82F6',\n              color: 'white',\n              border: 'none',\n              borderRadius: '6px',\n              cursor: 'pointer',\n              fontSize: '14px',\n              display: 'flex',\n              alignItems: 'center',\n              gap: '6px'\n            }}\n          >\n            + Add New Job\n          </button>\n        </div>\n\n        {/* Jobs List */}\n        <div style={{ display: 'flex', flexDirection: 'column', gap: '12px' }}>\n          {jobs.map(job => (\n            <div\n              key={job.id}\n              onClick={() => navigate(`/jobs/${job.id}`)}\n              style={{\n                backgroundColor: 'white',\n                padding: '16px',\n                borderRadius: '8px',\n                boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\n                cursor: 'pointer',\n                transition: 'box-shadow 0.2s'\n              }}\n              onMouseEnter={(e) => e.currentTarget.style.boxShadow = '0 4px 6px rgba(0,0,0,0.15)'}\n              onMouseLeave={(e) => e.currentTarget.style.boxShadow = '0 1px 3px rgba(0,0,0,0.1)'}\n            >\n              <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'start' }}>\n                <div style={{ flex: 1 }}>\n                  <h3 style={{ \n                    margin: '0 0 8px 0', \n                    fontSize: '18px', \n                    fontWeight: '600' \n                  }}>\n                    {job.title}\n                  </h3>\n                  <p style={{ \n                    margin: '0 0 8px 0', \n                    fontSize: '14px', \n                    color: '#6B7280' \n                  }}>\n                    {job.description}\n                  </p>\n                  <div style={{ \n                    display: 'flex', \n                    gap: '20px', \n                    fontSize: '13px', \n                    color: '#6B7280' \n                  }}>\n                    <span>Start: {formatDate(job.startDate)}</span>\n                    {job.endDate && <span>End: {formatDate(job.endDate)}</span>}\n                  </div>\n                </div>\n                <div style={{ textAlign: 'right' }}>\n                  <span style={{\n                    display: 'inline-block',\n                    padding: '4px 12px',\n                    backgroundColor: `${getStatusColor(job.status)}20`,\n                    color: getStatusColor(job.status),\n                    borderRadius: '12px',\n                    fontSize: '12px',\n                    fontWeight: '500',\n                    marginBottom: '8px'\n                  }}>\n                    {job.status}\n                  </span>\n                  <p style={{ \n                    margin: 0, \n                    fontSize: '18px', \n                    fontWeight: 'bold',\n                    color: '#111827'\n                  }}>\n                    ${job.totalCost.toLocaleString()}\n                  </p>\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n\n        {jobs.length === 0 && (\n          <div style={{\n            backgroundColor: 'white',\n            padding: '40px',\n            borderRadius: '8px',\n            textAlign: 'center',\n            color: '#6B7280'\n          }}>\n            No jobs yet. Click \"Add New Job\" to create one.\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default CustomerDetailEnhanced;"],"names":["CustomerDetailEnhanced","id","useParams","navigate","useNavigate","customer","setCustomer","useState","useEffect","foundCustomer","customerStorage","c","jobs","handlePhoneClick","handleEmailClick","handleAddressClick","encodedAddress","getStatusColor","status","formatDate","dateString","jsxs","jsx","job","e"],"mappings":"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"}