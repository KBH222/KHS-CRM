import{j as t}from"./ui-vendor-DuzoyoLP.js";import{u as we,r as u,R as ke}from"./react-vendor-BLXwT7zj.js";import{a as q,c as Ee}from"./localStorage-DKzdD8oH.js";import{w as Ce}from"./worker.service-fRvciyjk.js";import"./index-DEcLH6Mq.js";import"./utils-vendor-BiZXfEo0.js";const ze=()=>{const F=we(),[x,J]=u.useState(new Date),[g,ee]=u.useState("month"),[te,j]=u.useState(!1),[Se,oe]=u.useState(null),[T,M]=u.useState(null),[z,E]=u.useState(null),[f,Y]=u.useState(null),[b,I]=u.useState(null),[h,C]=u.useState(null),[S,w]=u.useState(""),[D,v]=u.useState(()=>{const e=q.getAll();return e.length>0?e:[{id:"job1",customerId:"1",customerName:"Sarah Johnson",title:"Kitchen Remodel",startDate:new Date(2024,11,15),endDate:new Date(2024,11,22),workers:["KBH"],color:"#3B82F6",price:15e3,status:"completed"},{id:"job2",customerId:"1",customerName:"Sarah Johnson",title:"Bathroom Addition",startDate:new Date(2024,11,18),endDate:new Date(2024,11,20),workers:["ISA","TYL"],color:"#10B981",price:8500,status:"in-progress"},{id:"job3",customerId:"2",customerName:"Mike Davis",title:"Deck Installation",startDate:new Date(2024,11,25),endDate:new Date(2024,11,28),workers:["TYL"],color:"#F59E0B",price:5e3,status:"pending"}]});u.useEffect(()=>{q.save(D)},[D]),u.useEffect(()=>{if(g==="gantt"){const e=new Date().getDate(),r=new Date(x.getFullYear(),x.getMonth()+1,0).getDate(),n=(e-1)/r;setTimeout(()=>{const i=document.getElementById("gantt-scroll-container");if(i){const a=i.scrollWidth-i.clientWidth;i.scrollLeft=a*n}},100)}},[g,x]);const[W,re]=u.useState([]);u.useEffect(()=>{const e=Ee.getAll();re(e.map(r=>({id:r.id,name:r.name})))},[]);const[k,ne]=u.useState([]),[B,ie]=u.useState({});u.useEffect(()=>{const e=Ce.getAll();ne(e.map(n=>n.name));const r={};e.forEach(n=>{r[n.name]=n.color}),ie(r)},[]);const[l,y]=u.useState({title:"",customerId:"",workers:[],startDate:"",endDate:"",description:"",isRecurring:!1,recurrenceType:"weekly",recurrenceEnd:"",recurrenceCount:1}),se=e=>new Date(e.getFullYear(),e.getMonth()+1,0).getDate(),ae=e=>new Date(e.getFullYear(),e.getMonth(),1).getDay(),le=e=>e.toLocaleDateString("en-US",{month:"long",year:"numeric"}),O=e=>D.filter(r=>{const n=new Date(r.startDate),i=new Date(r.endDate),a=new Date(e);return n.setHours(0,0,0,0),i.setHours(0,0,0,0),a.setHours(0,0,0,0),a>=n&&a<=i}),A=e=>{oe(e),M(null),y({title:"",customerId:"",workers:[],startDate:e.toISOString().split("T")[0],endDate:e.toISOString().split("T")[0],description:"",isRecurring:!1,recurrenceType:"weekly",recurrenceEnd:"",recurrenceCount:1}),j(!0)},de=e=>{var r,n;if(S.trim()){const i={id:`job${Date.now()}`,customerId:((r=W[0])==null?void 0:r.id)||"1",customerName:((n=W[0])==null?void 0:n.name)||"Default Customer",title:S.trim(),startDate:new Date(e),endDate:new Date(e),workers:k.length>0?[k[0]]:[],color:k.length>0?B[k[0]]:"#3B82F6",description:"",status:"pending"};v([...D,i]),C(null),w("")}},U=(e,r)=>{e.key==="Enter"&&(h==null?void 0:h.toDateString())===r.toDateString()?(e.preventDefault(),de(r)):e.key==="Escape"&&(C(null),w(""))},P=e=>{M(e),y({title:e.title,customerId:e.customerId,workers:[...e.workers],startDate:new Date(e.startDate).toISOString().split("T")[0],endDate:new Date(e.endDate).toISOString().split("T")[0],description:e.description||""}),j(!0),E(null)},L=e=>{confirm("Are you sure you want to delete this job?")&&(v(D.filter(r=>r.id!==e)),E(null))},$=(e,r)=>{e.stopPropagation(),E(z===r.id?null:r.id)},N=(e,r)=>{e.stopPropagation(),Y(r),E(null),e.dataTransfer.effectAllowed="move"},V=(e,r)=>{e.preventDefault(),e.stopPropagation(),f&&(e.dataTransfer.dropEffect="move",I(r))},K=e=>{e.preventDefault(),e.stopPropagation(),I(null)},Q=(e,r)=>{if(e.preventDefault(),e.stopPropagation(),f&&r){const n=Math.ceil((new Date(f.endDate)-new Date(f.startDate))/864e5),i=new Date(r),a=new Date(r);a.setDate(a.getDate()+n),v(D.map(c=>c.id===f.id?{...c,startDate:i,endDate:a}:c))}Y(null),I(null)},H=e=>{e.preventDefault(),Y(null),I(null)},ce=(e,r,n,i)=>{const a=[],c=new Date(e.startDate),p=new Date(e.endDate);let o=new Date(c),d=new Date(p),s=0;const m=n?new Date(n):new Date;for(m.setFullYear(m.getFullYear()+1);s<i&&o<=m;){switch(a.push({...e,id:`${e.id}_${s}`,startDate:new Date(o),endDate:new Date(d),parentJobId:e.id,recurrenceIndex:s}),r){case"daily":o.setDate(o.getDate()+1),d.setDate(d.getDate()+1);break;case"weekly":o.setDate(o.getDate()+7),d.setDate(d.getDate()+7);break;case"biweekly":o.setDate(o.getDate()+14),d.setDate(d.getDate()+14);break;case"monthly":o.setMonth(o.getMonth()+1),d.setMonth(d.getMonth()+1);break}s++}return a},pe=e=>{if(e.preventDefault(),!l.title||!l.customerId||l.workers.length===0){alert("Please fill in all required fields and select at least one worker");return}const r=W.find(n=>n.id===l.customerId);if(T)v(D.map(n=>n.id===T.id?{...n,title:l.title,customerId:l.customerId,customerName:r.name,startDate:new Date(l.startDate),endDate:new Date(l.endDate),workers:l.workers,color:B[l.workers[0]],description:l.description}:n));else{const n={id:`job${Date.now()}`,customerId:l.customerId,customerName:r.name,title:l.title,startDate:new Date(l.startDate),endDate:new Date(l.endDate),workers:l.workers,color:B[l.workers[0]],description:l.description,isRecurring:l.isRecurring,recurrenceType:l.recurrenceType};if(l.isRecurring){const i=ce(n,l.recurrenceType,l.recurrenceEnd,l.recurrenceCount);v([...D,...i])}else v([...D,n])}j(!1),M(null),y({title:"",customerId:"",workers:[],startDate:"",endDate:"",description:"",isRecurring:!1,recurrenceType:"weekly",recurrenceEnd:"",recurrenceCount:1})},_=e=>{const r=new Date(x);r.setMonth(x.getMonth()+e),J(r)},G=e=>{const r=new Date(x);r.setDate(x.getDate()+e*7),J(r)},X=e=>{const r=new Date(x);r.setDate(x.getDate()+e),J(r)},xe=e=>{const r=new Date(e);r.setDate(e.getDate()-e.getDay());const n=new Date(r);n.setDate(r.getDate()+6);const i=a=>a.toLocaleDateString("en-US",{month:"short",day:"numeric"});return`${i(r)} - ${i(n)}, ${n.getFullYear()}`},ge=e=>{const r=[],n=new Date(e);n.setDate(e.getDate()-e.getDay());for(let i=0;i<7;i++){const a=new Date(n);a.setDate(n.getDate()+i),r.push(a)}return r},ue=()=>{const e=se(x),r=ae(x),n=[];for(let i=0;i<r;i++)n.push(t.jsx("div",{style:{padding:"10px"}},`empty-${i}`));for(let i=1;i<=e;i++){const a=new Date(x.getFullYear(),x.getMonth(),i),c=O(a),p=new Date().toDateString()===a.toDateString();n.push(t.jsxs("div",{style:{border:"1px solid #E5E7EB",minHeight:"100px",padding:"8px",backgroundColor:p?"#FEF3C7":(b==null?void 0:b.toDateString())===a.toDateString()?"#DBEAFE":"white",borderColor:(b==null?void 0:b.toDateString())===a.toDateString()?"#3B82F6":"#E5E7EB",borderWidth:(b==null?void 0:b.toDateString())===a.toDateString()?"2px":"1px",position:"relative",overflow:"hidden",cursor:"pointer",transition:"background-color 0.2s"},onMouseEnter:o=>{!p&&!b&&(o.currentTarget.style.backgroundColor="#F9FAFB")},onMouseLeave:o=>{!p&&!b&&(o.currentTarget.style.backgroundColor="white")},onDragOver:o=>V(o,a),onDragLeave:K,onDrop:o=>Q(o,a),onClick:()=>{h||(C(a),w(""))},tabIndex:0,onKeyDown:o=>{!h&&o.key!=="Tab"&&(C(a),w(""))},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"4px"},children:[t.jsx("div",{style:{fontWeight:"600",color:p?"#92400E":"#374151"},children:i}),t.jsx("button",{onClick:o=>{o.stopPropagation(),A(a)},style:{width:"20px",height:"20px",padding:0,backgroundColor:"transparent",border:"1px solid #E5E7EB",borderRadius:"4px",cursor:"pointer",fontSize:"12px",color:"#6B7280",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s"},onMouseEnter:o=>{o.currentTarget.style.backgroundColor="#3B82F6",o.currentTarget.style.borderColor="#3B82F6",o.currentTarget.style.color="white"},onMouseLeave:o=>{o.currentTarget.style.backgroundColor="transparent",o.currentTarget.style.borderColor="#E5E7EB",o.currentTarget.style.color="#6B7280"},title:"Add job for this date",children:"+"})]}),t.jsxs("div",{style:{fontSize:"12px"},onClick:o=>{(h==null?void 0:h.toDateString())!==a.toDateString()&&(o.stopPropagation(),A(a))},children:[(h==null?void 0:h.toDateString())===a.toDateString()&&t.jsx("input",{type:"text",value:S,onChange:o=>w(o.target.value),onKeyDown:o=>U(o,a),onBlur:()=>{S.trim()||(C(null),w(""))},onClick:o=>o.stopPropagation(),placeholder:"Type job title...",autoFocus:!0,style:{width:"100%",padding:"4px",marginBottom:"4px",border:"1px solid #3B82F6",borderRadius:"3px",fontSize:"11px",outline:"none"}}),c.slice(0,2).map((o,d)=>t.jsxs("div",{style:{position:"relative"},children:[t.jsxs("div",{draggable:!0,onClick:s=>$(s,o),onDragStart:s=>N(s,o),onDragEnd:H,style:{backgroundColor:o.color,color:"white",padding:"2px 4px",marginBottom:"2px",borderRadius:"3px",cursor:"move",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:"11px",position:"relative",opacity:(f==null?void 0:f.id)===o.id?.5:1,transition:"opacity 0.2s"},title:`${o.title} - ${o.customerName} (Drag to reschedule)${o.parentJobId?" - Recurring":""}`,children:[o.parentJobId&&t.jsx("span",{style:{marginRight:"4px"},children:"ðŸ”"}),o.workers.join(", "),": ",o.title]}),z===o.id&&t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.3)",zIndex:999},onClick:s=>{s.stopPropagation(),E(null)}}),t.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"white",border:"1px solid #E5E7EB",borderRadius:"8px",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.2)",zIndex:1e3,minWidth:"200px",maxWidth:"90vw"},children:[t.jsx("div",{style:{padding:"12px 16px",borderBottom:"1px solid #E5E7EB",fontWeight:"600",fontSize:"14px",color:"#374151"},children:o.title}),t.jsx("button",{onClick:s=>{s.stopPropagation(),F(`/jobs/${o.id}`)},style:{display:"block",width:"100%",padding:"8px 12px",border:"none",backgroundColor:"transparent",textAlign:"left",cursor:"pointer",fontSize:"12px",color:"#374151"},onMouseEnter:s=>s.currentTarget.style.backgroundColor="#F3F4F6",onMouseLeave:s=>s.currentTarget.style.backgroundColor="transparent",children:"ðŸ‘ï¸ View Details"}),t.jsx("button",{onClick:s=>{s.stopPropagation(),P(o)},style:{display:"block",width:"100%",padding:"8px 12px",border:"none",backgroundColor:"transparent",textAlign:"left",cursor:"pointer",fontSize:"12px",color:"#374151"},onMouseEnter:s=>s.currentTarget.style.backgroundColor="#F3F4F6",onMouseLeave:s=>s.currentTarget.style.backgroundColor="transparent",children:"âœï¸ Edit"}),t.jsx("button",{onClick:s=>{s.stopPropagation(),L(o.id)},style:{display:"block",width:"100%",padding:"8px 12px",border:"none",backgroundColor:"transparent",textAlign:"left",cursor:"pointer",fontSize:"12px",color:"#DC2626"},onMouseEnter:s=>s.currentTarget.style.backgroundColor="#FEE2E2",onMouseLeave:s=>s.currentTarget.style.backgroundColor="transparent",children:"ðŸ—‘ï¸ Delete"})]})]})]},o.id)),c.length>2&&t.jsxs("div",{style:{fontSize:"11px",color:"#6B7280",fontStyle:"italic"},children:["+",c.length-2," more"]})]})]},i))}return n},he=()=>{const e=ge(x),r=Array.from({length:13},(n,i)=>i+6);return t.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[t.jsxs("div",{style:{display:"flex"},children:[t.jsx("div",{style:{width:"60px"}})," ",e.map(n=>{const i=new Date().toDateString()===n.toDateString();return t.jsxs("div",{style:{flex:1,padding:"12px",textAlign:"center",borderLeft:"1px solid #E5E7EB",backgroundColor:i?"#FEF3C7":"#F9FAFB",fontWeight:"600"},children:[t.jsx("div",{style:{fontSize:"12px",color:"#6B7280"},children:n.toLocaleDateString("en-US",{weekday:"short"})}),t.jsx("div",{style:{fontSize:"18px",color:i?"#92400E":"#374151"},children:n.getDate()})]},n.toISOString())})]}),r.map(n=>t.jsxs("div",{style:{display:"flex",borderTop:"1px solid #E5E7EB"},children:[t.jsx("div",{style:{width:"60px",padding:"20px 8px",fontSize:"12px",color:"#6B7280",textAlign:"right",borderRight:"1px solid #E5E7EB"},children:n>12?`${n-12} PM`:n===12?"12 PM":`${n} AM`}),e.map(i=>{const a=O(i),c=new Date().toDateString()===i.toDateString();return t.jsxs("div",{style:{flex:1,minHeight:"60px",padding:"4px",borderLeft:"1px solid #E5E7EB",backgroundColor:c?"#FFFBEB":(b==null?void 0:b.toDateString())===i.toDateString()?"#DBEAFE":"white",cursor:"pointer",position:"relative",transition:"background-color 0.2s"},onClick:()=>{h?(h==null?void 0:h.toDateString())!==i.toDateString()&&A(i):(C(i),w(""))},onDragOver:p=>V(p,i),onDragLeave:K,onDrop:p=>Q(p,i),children:[(h==null?void 0:h.toDateString())===i.toDateString()&&t.jsx("input",{type:"text",value:S,onChange:p=>w(p.target.value),onKeyDown:p=>U(p,i),onBlur:()=>{S.trim()||(C(null),w(""))},onClick:p=>p.stopPropagation(),placeholder:"Type job title...",autoFocus:!0,style:{width:"100%",padding:"4px",marginBottom:"4px",border:"1px solid #3B82F6",borderRadius:"3px",fontSize:"11px",outline:"none"}}),a.map(p=>t.jsxs("div",{draggable:!0,onClick:o=>$(o,p),onDragStart:o=>N(o,p),onDragEnd:H,style:{backgroundColor:p.color,color:"white",padding:"4px",marginBottom:"2px",borderRadius:"4px",fontSize:"11px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",cursor:"move",opacity:(f==null?void 0:f.id)===p.id?.5:1,transition:"opacity 0.2s"},title:`${p.title} - ${p.customerName} (Drag to reschedule)`,children:[p.workers.join(", "),": ",p.title]},p.id)),a.map(p=>z===p.id&&t.jsxs(ke.Fragment,{children:[t.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.3)",zIndex:999},onClick:o=>{o.stopPropagation(),E(null)}}),t.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"white",border:"1px solid #E5E7EB",borderRadius:"8px",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.2)",zIndex:1e3,minWidth:"200px",maxWidth:"90vw"},children:[t.jsx("div",{style:{padding:"12px 16px",borderBottom:"1px solid #E5E7EB",fontWeight:"600",fontSize:"14px",color:"#374151"},children:p.title}),t.jsx("button",{onClick:o=>{o.stopPropagation(),F(`/jobs/${p.id}`)},style:{display:"block",width:"100%",padding:"8px 12px",border:"none",backgroundColor:"transparent",textAlign:"left",cursor:"pointer",fontSize:"12px",color:"#374151"},onMouseEnter:o=>o.currentTarget.style.backgroundColor="#F3F4F6",onMouseLeave:o=>o.currentTarget.style.backgroundColor="transparent",children:"ðŸ‘ï¸ View Details"}),t.jsx("button",{onClick:o=>{o.stopPropagation(),P(p)},style:{display:"block",width:"100%",padding:"8px 12px",border:"none",backgroundColor:"transparent",textAlign:"left",cursor:"pointer",fontSize:"12px",color:"#374151"},onMouseEnter:o=>o.currentTarget.style.backgroundColor="#F3F4F6",onMouseLeave:o=>o.currentTarget.style.backgroundColor="transparent",children:"âœï¸ Edit"}),t.jsx("button",{onClick:o=>{o.stopPropagation(),L(p.id)},style:{display:"block",width:"100%",padding:"8px 12px",border:"none",backgroundColor:"transparent",textAlign:"left",cursor:"pointer",fontSize:"12px",color:"#DC2626"},onMouseEnter:o=>o.currentTarget.style.backgroundColor="#FEE2E2",onMouseLeave:o=>o.currentTarget.style.backgroundColor="transparent",children:"ðŸ—‘ï¸ Delete"})]})]},`menu-${p.id}`))]},`${n}-${i.toISOString()}`)})]},n))]})},ye=()=>{const e=O(x),r=Array.from({length:13},(i,a)=>a+6),n=new Date().toDateString()===x.toDateString();return t.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"600px"},children:[t.jsxs("div",{style:{padding:"16px",backgroundColor:n?"#FEF3C7":"#F9FAFB",borderBottom:"1px solid #E5E7EB",textAlign:"center",flexShrink:0},children:[t.jsx("h3",{style:{margin:0,fontSize:"20px",fontWeight:"600",color:n?"#92400E":"#374151"},children:x.toLocaleDateString("en-US",{weekday:"long"})}),t.jsx("button",{onClick:()=>A(x),style:{marginTop:"8px",padding:"6px 12px",backgroundColor:"#3B82F6",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"+ Add Job"})]}),t.jsx("div",{style:{flex:1,overflowY:"auto",WebkitOverflowScrolling:"touch"},children:r.map(i=>t.jsxs("div",{style:{display:"flex",borderBottom:"1px solid #E5E7EB",minHeight:"80px"},children:[t.jsx("div",{style:{width:"80px",padding:"20px 12px",fontSize:"14px",color:"#6B7280",textAlign:"right",borderRight:"1px solid #E5E7EB",backgroundColor:"#F9FAFB"},children:i>12?`${i-12}:00 PM`:i===12?"12:00 PM":`${i}:00 AM`}),t.jsx("div",{style:{flex:1,padding:"8px",backgroundColor:n?"#FFFBEB":"white",position:"relative"},children:e.map(a=>t.jsxs("div",{children:[t.jsxs("div",{draggable:!0,onClick:c=>$(c,a),onDragStart:c=>N(c,a),onDragEnd:H,style:{backgroundColor:a.color,color:"white",padding:"8px 12px",marginBottom:"4px",borderRadius:"6px",cursor:"move",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",opacity:(f==null?void 0:f.id)===a.id?.5:1,transition:"opacity 0.2s"},title:`Drag to reschedule ${a.title}`,children:[t.jsx("div",{style:{fontWeight:"600",fontSize:"14px",marginBottom:"4px"},children:a.title}),t.jsxs("div",{style:{fontSize:"12px",opacity:.9},children:[a.customerName," â€¢ ",a.workers.join(", ")]}),a.description&&t.jsx("div",{style:{fontSize:"11px",marginTop:"4px",opacity:.8},children:a.description})]}),z===a.id&&t.jsxs("div",{style:{position:"absolute",top:"40px",left:"20px",backgroundColor:"white",border:"1px solid #E5E7EB",borderRadius:"6px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",zIndex:10,minWidth:"120px"},children:[t.jsx("button",{onClick:c=>{c.stopPropagation(),F(`/jobs/${a.id}`)},style:{display:"block",width:"100%",padding:"8px 12px",border:"none",backgroundColor:"transparent",textAlign:"left",cursor:"pointer",fontSize:"12px",color:"#374151"},onMouseEnter:c=>c.currentTarget.style.backgroundColor="#F3F4F6",onMouseLeave:c=>c.currentTarget.style.backgroundColor="transparent",children:"ðŸ‘ï¸ View Details"}),t.jsx("button",{onClick:c=>{c.stopPropagation(),P(a)},style:{display:"block",width:"100%",padding:"8px 12px",border:"none",backgroundColor:"transparent",textAlign:"left",cursor:"pointer",fontSize:"12px",color:"#374151"},onMouseEnter:c=>c.currentTarget.style.backgroundColor="#F3F4F6",onMouseLeave:c=>c.currentTarget.style.backgroundColor="transparent",children:"âœï¸ Edit"}),t.jsx("button",{onClick:c=>{c.stopPropagation(),L(a.id)},style:{display:"block",width:"100%",padding:"8px 12px",border:"none",backgroundColor:"transparent",textAlign:"left",cursor:"pointer",fontSize:"12px",color:"#DC2626"},onMouseEnter:c=>c.currentTarget.style.backgroundColor="#FEE2E2",onMouseLeave:c=>c.currentTarget.style.backgroundColor="transparent",children:"ðŸ—‘ï¸ Delete"})]})]},a.id))})]},i))})]})},fe=()=>{const e=new Date(x.getFullYear(),x.getMonth(),1),r=new Date(x.getFullYear(),x.getMonth()+1,0),n=r.getDate(),i=o=>{const d=new Date,s=d.getDate();return x.getMonth()===d.getMonth()&&x.getFullYear()===d.getFullYear()&&o<=s-2},a=D.filter(o=>{const d=new Date(o.startDate),s=new Date(o.endDate);return d<=r&&s>=e}),c={};k.forEach(o=>{c[o]=a.filter(d=>d.workers.includes(o))});const p=[];for(let o=1;o<=n;o++)p.push(o);return t.jsx("div",{id:"gantt-scroll-container",style:{overflowX:"auto",WebkitOverflowScrolling:"touch",msOverflowStyle:"-ms-autohiding-scrollbar",scrollbarWidth:"thin"},children:t.jsxs("div",{style:{minWidth:"1000px"},children:[t.jsxs("div",{style:{display:"flex",borderBottom:"2px solid #E5E7EB"},children:[t.jsx("div",{style:{width:"120px",padding:"12px",backgroundColor:"#F9FAFB",fontWeight:"600",borderRight:"1px solid #E5E7EB"},children:"Worker"}),t.jsx("div",{style:{flex:1,display:"flex"},children:p.map(o=>{const d=new Date(x.getFullYear(),x.getMonth(),o),s=d.getDay()===0||d.getDay()===6,m=i(o);return t.jsx("div",{style:{flex:1,minWidth:"30px",padding:"8px 4px",textAlign:"center",fontSize:"12px",backgroundColor:m?"#E5E7EB":s?"#F9FAFB":"white",borderRight:"1px solid #E5E7EB",fontWeight:"400",color:m?"#6B7280":"#374151",borderTop:"none"},children:o},o)})})]}),k.map(o=>t.jsxs("div",{style:{display:"flex",borderBottom:"1px solid #E5E7EB"},children:[t.jsxs("div",{style:{width:"120px",padding:"16px 12px",backgroundColor:"#F9FAFB",fontWeight:"500",borderRight:"1px solid #E5E7EB",display:"flex",alignItems:"center",gap:"8px"},children:[t.jsx("div",{style:{width:"12px",height:"12px",backgroundColor:B[o],borderRadius:"2px"}}),o]}),t.jsxs("div",{style:{flex:1,position:"relative",height:"50px"},children:[t.jsx("div",{style:{display:"flex",position:"absolute",top:0,left:0,right:0,bottom:0},children:p.map(d=>{const s=new Date(x.getFullYear(),x.getMonth(),d),m=s.getDay()===0||s.getDay()===6,R=i(d);return t.jsx("div",{style:{flex:1,borderRight:"1px solid #E5E7EB",backgroundColor:R?"#E5E7EB":m?"#FAFAFA":"transparent"}},d)})}),c[o].map(d=>{const s=new Date(d.startDate),m=new Date(d.endDate);let R=s.getDate(),Z=m.getDate();s<e&&(R=1),m>r&&(Z=n);const be=(R-1)/n*100,me=(Z-R+1)/n*100;return t.jsx("div",{onClick:De=>$(De,d),style:{position:"absolute",top:"8px",height:"34px",left:`${be}%`,width:`${me}%`,backgroundColor:d.color,borderRadius:"4px",padding:"4px 8px",color:"white",fontSize:"12px",cursor:"pointer",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",boxShadow:"0 1px 3px rgba(0,0,0,0.2)",zIndex:1,display:"flex",alignItems:"center"},title:`${d.title} - ${d.customerName}`,children:d.title},d.id)}),c[o].map(d=>z===d.id&&t.jsxs("div",{style:{position:"absolute",top:"50px",left:"50px",backgroundColor:"white",border:"1px solid #E5E7EB",borderRadius:"6px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",zIndex:10,minWidth:"120px"},children:[t.jsx("button",{onClick:s=>{s.stopPropagation(),F(`/jobs/${d.id}`)},style:{display:"block",width:"100%",padding:"8px 12px",border:"none",backgroundColor:"transparent",textAlign:"left",cursor:"pointer",fontSize:"12px",color:"#374151"},onMouseEnter:s=>s.currentTarget.style.backgroundColor="#F3F4F6",onMouseLeave:s=>s.currentTarget.style.backgroundColor="transparent",children:"ðŸ‘ï¸ View Details"}),t.jsx("button",{onClick:s=>{s.stopPropagation(),P(d)},style:{display:"block",width:"100%",padding:"8px 12px",border:"none",backgroundColor:"transparent",textAlign:"left",cursor:"pointer",fontSize:"12px",color:"#374151"},onMouseEnter:s=>s.currentTarget.style.backgroundColor="#F3F4F6",onMouseLeave:s=>s.currentTarget.style.backgroundColor="transparent",children:"âœï¸ Edit"}),t.jsx("button",{onClick:s=>{s.stopPropagation(),L(d.id)},style:{display:"block",width:"100%",padding:"8px 12px",border:"none",backgroundColor:"transparent",textAlign:"left",cursor:"pointer",fontSize:"12px",color:"#DC2626"},onMouseEnter:s=>s.currentTarget.style.backgroundColor="#FEE2E2",onMouseLeave:s=>s.currentTarget.style.backgroundColor="transparent",children:"ðŸ—‘ï¸ Delete"})]},`menu-${d.id}`))]})]},o))]})})};return t.jsxs("div",{style:{height:"100%",overflowY:"auto",WebkitOverflowScrolling:"touch",paddingBottom:"100px"},onClick:()=>E(null),children:[t.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"20px"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",flexWrap:"wrap",gap:"12px"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[t.jsx("button",{onClick:()=>F("/dashboard"),style:{background:"none",border:"none",padding:"8px",cursor:"pointer",display:"flex",alignItems:"center",color:"#6B7280",borderRadius:"6px"},onMouseEnter:e=>e.currentTarget.style.backgroundColor="#F3F4F6",onMouseLeave:e=>e.currentTarget.style.backgroundColor="transparent",children:t.jsx("svg",{style:{width:"28px",height:"28px"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),t.jsx("h1",{style:{fontSize:"24px",fontWeight:"bold",margin:0},children:"Schedule"})]}),t.jsx("button",{onClick:()=>{const e=new Date;M(null),y({title:"",customerId:"",workers:[],startDate:e.toISOString().split("T")[0],endDate:e.toISOString().split("T")[0],description:"",isRecurring:!1,recurrenceType:"weekly",recurrenceEnd:"",recurrenceCount:1}),j(!0)},style:{padding:"8px 16px",backgroundColor:"#3B82F6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px"},children:"+ New Job"})]}),t.jsx("div",{style:{display:"flex",gap:"8px",marginBottom:"16px",justifyContent:"center",flexWrap:"wrap"},children:["month","week","day","gantt"].map(e=>t.jsx("button",{onClick:()=>ee(e),style:{padding:"10px 20px",backgroundColor:g===e?"#3B82F6":"white",color:g===e?"white":"#374151",border:`1px solid ${g===e?"#3B82F6":"#E5E7EB"}`,borderRadius:"6px",cursor:"pointer",fontSize:"16px",fontWeight:g===e?"500":"400",textTransform:"capitalize",minHeight:"44px",WebkitTapHighlightColor:"transparent"},children:e},e))}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"white",padding:"16px",borderRadius:"8px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",marginBottom:"20px"},children:[t.jsx("button",{onClick:()=>{g==="month"||g==="gantt"?_(-1):g==="week"?G(-1):g==="day"&&X(-1)},style:{padding:"8px 12px",backgroundColor:"#F3F4F6",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px"},children:"â† Previous"}),t.jsxs("h2",{style:{fontSize:"20px",fontWeight:"600",margin:0},children:[g==="month"&&le(x),g==="week"&&xe(x),g==="day"&&x.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),g==="gantt"&&`${x.toLocaleDateString("en-US",{month:"long",year:"numeric"})} - Gantt Chart`]}),t.jsx("button",{onClick:()=>{g==="month"||g==="gantt"?_(1):g==="week"?G(1):g==="day"&&X(1)},style:{padding:"8px 12px",backgroundColor:"#F3F4F6",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px"},children:"Next â†’"})]})]}),t.jsxs("div",{style:{backgroundColor:"white",borderRadius:"8px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",overflow:"hidden"},children:[g==="month"&&t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",backgroundColor:"#F9FAFB",borderBottom:"1px solid #E5E7EB"},children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>t.jsx("div",{style:{padding:"12px",fontWeight:"600",fontSize:"14px",textAlign:"center",color:"#374151"},children:e},e))}),t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)"},children:ue()})]}),g==="week"&&he(),g==="day"&&ye(),g==="gantt"&&fe()]}),t.jsxs("div",{style:{marginTop:"20px",padding:"16px",backgroundColor:"white",borderRadius:"8px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[t.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"12px"},children:"Worker Legend"}),t.jsx("div",{style:{display:"flex",gap:"20px",flexWrap:"wrap"},children:k.map(e=>t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[t.jsx("div",{style:{width:"20px",height:"20px",backgroundColor:B[e],borderRadius:"4px"}}),t.jsx("span",{style:{fontSize:"14px"},children:e})]},e))})]}),te&&t.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"flex-start",justifyContent:"center",zIndex:50,overflowY:"auto",paddingTop:"20px",paddingBottom:"20px"},children:t.jsxs("div",{style:{backgroundColor:"white",borderRadius:"8px",padding:"24px",maxWidth:"500px",width:"90%",maxHeight:"calc(100vh - 40px)",overflowY:"auto",WebkitOverflowScrolling:"touch",margin:"0 auto"},children:[t.jsx("h2",{style:{fontSize:"20px",fontWeight:"600",marginBottom:"20px"},children:T?"Edit Job":"Schedule New Job"}),t.jsxs("form",{onSubmit:pe,children:[t.jsxs("div",{style:{marginBottom:"16px"},children:[t.jsx("label",{style:{display:"block",marginBottom:"4px",fontSize:"14px",fontWeight:"500"},children:"Job Title *"}),t.jsx("input",{type:"text",value:l.title,onChange:e=>y({...l,title:e.target.value}),placeholder:"e.g., Kitchen Remodel",style:{width:"100%",padding:"8px 12px",border:"1px solid #E5E7EB",borderRadius:"6px",fontSize:"14px"},required:!0})]}),t.jsxs("div",{style:{marginBottom:"16px"},children:[t.jsx("label",{style:{display:"block",marginBottom:"4px",fontSize:"14px",fontWeight:"500"},children:"Customer *"}),t.jsxs("select",{value:l.customerId,onChange:e=>y({...l,customerId:e.target.value}),style:{width:"100%",padding:"8px 12px",border:"1px solid #E5E7EB",borderRadius:"6px",fontSize:"14px",backgroundColor:"white",cursor:"pointer",appearance:"none",backgroundImage:`url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e")`,backgroundRepeat:"no-repeat",backgroundPosition:"right 8px center",backgroundSize:"20px",paddingRight:"36px",transition:"border-color 0.2s"},onFocus:e=>e.target.style.borderColor="#3B82F6",onBlur:e=>e.target.style.borderColor="#E5E7EB",onMouseEnter:e=>e.target.style.borderColor="#9CA3AF",onMouseLeave:e=>e.target.style.borderColor="#E5E7EB",required:!0,children:[t.jsx("option",{value:"",children:"Select a customer..."}),W.length===0?t.jsx("option",{disabled:!0,children:"No customers available"}):W.map(e=>t.jsx("option",{value:e.id,children:e.name},e.id))]})]}),t.jsxs("div",{style:{marginBottom:"16px"},children:[t.jsx("label",{style:{display:"block",marginBottom:"4px",fontSize:"14px",fontWeight:"500"},children:"Assign Workers * (Select one or more)"}),t.jsx("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap"},children:k.map(e=>t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",cursor:"pointer",padding:"6px 12px",border:"1px solid #E5E7EB",borderRadius:"6px",backgroundColor:l.workers.includes(e)?"#EBF5FF":"white",transition:"all 0.2s"},children:[t.jsx("input",{type:"checkbox",value:e,checked:l.workers.includes(e),onChange:r=>{r.target.checked?y({...l,workers:[...l.workers,e]}):y({...l,workers:l.workers.filter(n=>n!==e)})},style:{cursor:"pointer"}}),t.jsx("span",{style:{fontSize:"14px",fontWeight:l.workers.includes(e)?"500":"400"},children:e}),t.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:B[e],borderRadius:"4px"}})]},e))})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",marginBottom:"16px"},children:[t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"4px",fontSize:"14px",fontWeight:"500"},children:"Start Date *"}),t.jsx("input",{type:"date",value:l.startDate,onChange:e=>y({...l,startDate:e.target.value}),style:{width:"100%",padding:"8px 12px",border:"1px solid #E5E7EB",borderRadius:"6px",fontSize:"14px"},required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"4px",fontSize:"14px",fontWeight:"500"},children:"End Date *"}),t.jsx("input",{type:"date",value:l.endDate,onChange:e=>y({...l,endDate:e.target.value}),min:l.startDate,style:{width:"100%",padding:"8px 12px",border:"1px solid #E5E7EB",borderRadius:"6px",fontSize:"14px"},required:!0})]})]}),t.jsxs("div",{style:{marginBottom:"16px"},children:[t.jsx("label",{style:{display:"block",marginBottom:"4px",fontSize:"14px",fontWeight:"500"},children:"Description"}),t.jsx("textarea",{value:l.description,onChange:e=>y({...l,description:e.target.value}),placeholder:"Add job details...",rows:3,style:{width:"100%",padding:"8px 12px",border:"1px solid #E5E7EB",borderRadius:"6px",fontSize:"14px",resize:"vertical"}})]}),!T&&t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px",cursor:"pointer"},children:[t.jsx("input",{type:"checkbox",checked:l.isRecurring,onChange:e=>y({...l,isRecurring:e.target.checked}),style:{cursor:"pointer"}}),t.jsx("span",{style:{fontSize:"14px",fontWeight:"500"},children:"Make this a recurring job"})]}),l.isRecurring&&t.jsxs("div",{style:{padding:"16px",backgroundColor:"#F9FAFB",borderRadius:"6px",border:"1px solid #E5E7EB"},children:[t.jsxs("div",{style:{marginBottom:"12px"},children:[t.jsx("label",{style:{display:"block",marginBottom:"4px",fontSize:"14px",fontWeight:"500"},children:"Repeat Every"}),t.jsxs("select",{value:l.recurrenceType,onChange:e=>y({...l,recurrenceType:e.target.value}),style:{width:"100%",padding:"8px 12px",border:"1px solid #E5E7EB",borderRadius:"6px",fontSize:"14px",backgroundColor:"white",cursor:"pointer"},children:[t.jsx("option",{value:"daily",children:"Day"}),t.jsx("option",{value:"weekly",children:"Week"}),t.jsx("option",{value:"biweekly",children:"Two Weeks"}),t.jsx("option",{value:"monthly",children:"Month"})]})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"4px",fontSize:"14px",fontWeight:"500"},children:"Number of Occurrences"}),t.jsx("input",{type:"number",value:l.recurrenceCount,onChange:e=>y({...l,recurrenceCount:parseInt(e.target.value)||1}),min:"1",max:"52",style:{width:"100%",padding:"8px 12px",border:"1px solid #E5E7EB",borderRadius:"6px",fontSize:"14px"}})]}),t.jsxs("div",{children:[t.jsx("label",{style:{display:"block",marginBottom:"4px",fontSize:"14px",fontWeight:"500"},children:"End By (Optional)"}),t.jsx("input",{type:"date",value:l.recurrenceEnd,onChange:e=>y({...l,recurrenceEnd:e.target.value}),min:l.startDate,style:{width:"100%",padding:"8px 12px",border:"1px solid #E5E7EB",borderRadius:"6px",fontSize:"14px"}})]})]})]})]}),t.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[t.jsx("button",{type:"button",onClick:()=>{j(!1),M(null),y({title:"",customerId:"",workers:[],startDate:"",endDate:"",description:"",isRecurring:!1,recurrenceType:"weekly",recurrenceEnd:"",recurrenceCount:1})},style:{padding:"8px 16px",backgroundColor:"#E5E7EB",color:"#374151",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px"},children:"Cancel"}),t.jsx("button",{type:"submit",style:{padding:"8px 16px",backgroundColor:"#3B82F6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px"},children:T?"Update Job":"Create Job"})]})]})]})})]})};export{ze as default};
//# sourceMappingURL=ScheduleCalendar-BmxSHXq4.js.map
