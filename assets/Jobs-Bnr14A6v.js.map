{"version":3,"file":"Jobs-Bnr14A6v.js","sources":["../../src/components/BackButton.tsx","../../src/pages/Jobs.tsx"],"sourcesContent":["import { useNavigate } from 'react-router-dom';\n\nexport const BackButton = ({ to = '/dashboard', text = 'Back to Home' }: { to?: string; text?: string }) => {\n  const navigate = useNavigate();\n\n  return (\n    <button\n      onClick={() => navigate(to)}\n      className=\"inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 active:bg-gray-100 transition-colors\"\n    >\n      <svg className=\"w-5 h-5 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\n      </svg>\n      {text}\n    </button>\n  );\n};","import { useState, useEffect } from 'react';\nimport { useIsOwner } from '../stores/auth.store';\nimport { BackButton } from '../components/BackButton';\nimport { useLocation } from 'react-router-dom';\n\n// Jobs service for localStorage\nconst jobsService = {\n  getAll: () => {\n    const stored = localStorage.getItem('khs-crm-jobs');\n    return stored ? JSON.parse(stored) : [];\n  },\n  save: (jobs) => {\n    localStorage.setItem('khs-crm-jobs', JSON.stringify(jobs));\n  }\n};\n\nconst statusColors = {\n  QUOTED: { bg: 'bg-gray-100', text: 'text-gray-800', label: 'Quoted' },\n  SCHEDULED: { bg: 'bg-blue-100', text: 'text-blue-800', label: 'Scheduled' },\n  IN_PROGRESS: { bg: 'bg-yellow-100', text: 'text-yellow-800', label: 'In Progress' },\n  COMPLETED: { bg: 'bg-green-100', text: 'text-green-800', label: 'Completed' },\n  CANCELLED: { bg: 'bg-red-100', text: 'text-red-800', label: 'Cancelled' },\n};\n\nconst Jobs = () => {\n  const isOwner = useIsOwner();\n  const location = useLocation();\n  const [filter, setFilter] = useState('ALL');\n  const [jobs, setJobs] = useState([]);\n  const [showNewJobModal, setShowNewJobModal] = useState(false);\n  const [prefilledCustomer, setPrefilledCustomer] = useState(null);\n  \n  useEffect(() => {\n    setJobs(jobsService.getAll());\n    \n    // Check if we came from a customer page with \"Add Job\"\n    if (location.state?.customerId && location.state?.customerName) {\n      setPrefilledCustomer({\n        id: location.state.customerId,\n        name: location.state.customerName\n      });\n      setShowNewJobModal(true);\n    }\n  }, [location.state]);\n  \n  const filteredJobs = jobs.filter(job => {\n    if (filter === 'ALL') {\n      return true;\n    }\n    return job.status === filter;\n  });\n\n  return (\n    <div className=\"flex flex-col h-full\">\n      {/* Back Button */}\n      <div className=\"mb-4\">\n        <BackButton />\n      </div>\n      \n      {/* Header */}\n      <div className=\"flex items-center justify-between mb-4\">\n        <h2 className=\"text-xl font-bold text-gray-900\">Jobs</h2>\n        {isOwner && (\n          <button className=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700\">\n            <svg className=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 6v6m0 0v6m0-6h6m-6 0H6\" />\n            </svg>\n            New Job\n          </button>\n        )}\n      </div>\n\n      {/* Filter Tabs */}\n      <div className=\"flex space-x-1 overflow-x-auto mb-4 -mx-4 px-4\">\n        {['ALL', 'QUOTED', 'SCHEDULED', 'IN_PROGRESS', 'COMPLETED'].map((status) => (\n          <button\n            key={status}\n            onClick={() => setFilter(status)}\n            className={`px-4 py-3 text-sm font-medium rounded-md whitespace-nowrap min-w-[80px] ${\n              filter === status\n                ? 'bg-blue-600 text-white'\n                : 'text-gray-700 hover:bg-gray-100'\n            }`}\n          >\n            {status === 'ALL' ? 'All Jobs' : statusColors[status as keyof typeof statusColors]?.label || status}\n          </button>\n        ))}\n      </div>\n\n      {/* Jobs List */}\n      <div className=\"flex-1 overflow-auto space-y-3\">\n        {filteredJobs.length === 0 ? (\n          <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6 text-center text-gray-500\">\n            No jobs found.\n          </div>\n        ) : (\n          filteredJobs.map((job) => {\n            const status = statusColors[job.status as keyof typeof statusColors];\n            return (\n              <div key={job.id} className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-4 active:bg-gray-50 transition-colors\">\n                <div className=\"flex items-start justify-between\">\n                  <div className=\"flex-1\">\n                    <div className=\"flex items-center\">\n                      <h3 className=\"text-base font-medium text-gray-900\">{job.title}</h3>\n                      <span className={`ml-3 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${status.bg} ${status.text}`}>\n                        {status.label}\n                      </span>\n                    </div>\n                    <p className=\"mt-1 text-sm text-gray-600\">{job.customer}</p>\n                    <p className=\"mt-1 text-sm text-gray-500\">{job.address}</p>\n                    \n                    <div className=\"mt-3 flex items-center text-sm text-gray-500\">\n                      <svg className=\"flex-shrink-0 mr-1.5 h-4 w-4 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\" />\n                      </svg>\n                      {new Date(job.startDate).toLocaleDateString()} - {new Date(job.endDate).toLocaleDateString()}\n                    </div>\n                    \n                    {job.assignedTo.length > 0 && (\n                      <div className=\"mt-2 flex items-center text-sm text-gray-500\">\n                        <svg className=\"flex-shrink-0 mr-1.5 h-4 w-4 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z\" />\n                        </svg>\n                        {job.assignedTo.join(', ')}\n                      </div>\n                    )}\n                  </div>\n                  \n                  <div className=\"ml-4 flex-shrink-0 text-right\">\n                    <p className=\"text-lg font-medium text-gray-900\">${job.totalCost.toLocaleString()}</p>\n                    <button className=\"mt-2 text-sm text-blue-600 hover:text-blue-500\">\n                      View Details â†’\n                    </button>\n                  </div>\n                </div>\n              </div>\n            );\n          })\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Jobs;"],"names":["BackButton","to","text","navigate","useNavigate","jsxs","jsx","jobsService","stored","jobs","statusColors","Jobs","isOwner","useIsOwner","location","useLocation","filter","setFilter","useState","setJobs","showNewJobModal","setShowNewJobModal","prefilledCustomer","setPrefilledCustomer","useEffect","_a","_b","filteredJobs","job","status"],"mappings":"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"}