import{j as e}from"./ui-vendor-DuzoyoLP.js";import{d as B,u as k,r as s}from"./react-vendor-BLXwT7zj.js";import{a as E}from"./localStorage-DKzdD8oH.js";import"./index-DEcLH6Mq.js";import"./utils-vendor-BiZXfEo0.js";const D=()=>{const{id:l}=B(),u=k(),[p,f]=s.useState(null),[i,x]=s.useState({before:[],during:[],after:[]}),[r,m]=s.useState("before"),[b,c]=s.useState(!1),[d,y]=s.useState("before");s.useEffect(()=>{const n=E.getAll().find(t=>t.id===l);if(n){f(n);const t=localStorage.getItem(`job_photos_${l}`);t&&x(JSON.parse(t))}},[l]);const j=o=>{const n=Array.from(o.target.files),t=[];n.forEach(a=>{const h=new FileReader;h.onload=v=>{const w={id:Date.now()+Math.random(),url:v.target.result,name:a.name,uploadDate:new Date().toISOString(),type:d};if(t.push(w),t.length===n.length){const g={...i,[d]:[...i[d],...t]};x(g),localStorage.setItem(`job_photos_${l}`,JSON.stringify(g)),c(!1)}},h.readAsDataURL(a)})},S=(o,n)=>{if(confirm("Are you sure you want to delete this photo?")){const t={...i,[o]:i[o].filter(a=>a.id!==n)};x(t),localStorage.setItem(`job_photos_${l}`,JSON.stringify(t))}};if(!p)return e.jsx("div",{style:{padding:"20px"},children:"Loading..."});const C=[{id:"before",label:"Before",count:i.before.length},{id:"during",label:"During",count:i.during.length},{id:"after",label:"After",count:i.after.length}];return e.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"20px"},children:[e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("button",{onClick:()=>u("/schedule"),style:{marginBottom:"15px",padding:"8px 16px",backgroundColor:"#E5E7EB",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px"},children:"← Back to Schedule"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:"24px",fontWeight:"bold",margin:"0 0 8px 0"},children:"Job Photos"}),e.jsxs("p",{style:{color:"#6B7280",margin:0},children:[p.title," - ",p.customerName]})]}),e.jsx("button",{onClick:()=>{y(r),c(!0)},style:{padding:"8px 16px",backgroundColor:"#3B82F6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px"},children:"+ Upload Photos"})]})]}),e.jsx("div",{style:{display:"flex",gap:"2px",backgroundColor:"#E5E7EB",padding:"2px",borderRadius:"8px",marginBottom:"20px"},children:C.map(o=>e.jsxs("button",{onClick:()=>m(o.id),style:{flex:1,padding:"10px 16px",backgroundColor:r===o.id?"white":"transparent",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:r===o.id?"600":"400",color:r===o.id?"#111827":"#6B7280",transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[o.label,o.count>0&&e.jsx("span",{style:{backgroundColor:r===o.id?"#3B82F6":"#9CA3AF",color:"white",borderRadius:"12px",padding:"2px 8px",fontSize:"12px",fontWeight:"500"},children:o.count})]},o.id))}),e.jsx("div",{style:{backgroundColor:"white",borderRadius:"8px",padding:"20px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:i[r].length===0?e.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",color:"#9CA3AF"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"📷"}),e.jsxs("p",{style:{fontSize:"16px",margin:"0 0 8px 0"},children:["No ",r," photos yet"]}),e.jsx("p",{style:{fontSize:"14px",margin:0},children:'Click "Upload Photos" to add some'})]}):e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",gap:"16px"},children:i[r].map(o=>e.jsxs("div",{style:{position:"relative",borderRadius:"8px",overflow:"hidden",border:"1px solid #E5E7EB",backgroundColor:"#F9FAFB"},children:[e.jsx("img",{src:o.url,alt:o.name,style:{width:"100%",height:"200px",objectFit:"cover",cursor:"pointer"},onClick:()=>window.open(o.url,"_blank")}),e.jsxs("div",{style:{padding:"12px",borderTop:"1px solid #E5E7EB"},children:[e.jsx("p",{style:{fontSize:"14px",fontWeight:"500",margin:"0 0 4px 0",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:o.name}),e.jsx("p",{style:{fontSize:"12px",color:"#6B7280",margin:0},children:new Date(o.uploadDate).toLocaleDateString()})]}),e.jsx("button",{onClick:()=>S(r,o.id),style:{position:"absolute",top:"8px",right:"8px",width:"32px",height:"32px",backgroundColor:"rgba(0,0,0,0.5)",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"16px"},title:"Delete photo",children:"×"})]},o.id))})}),b&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50},children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"8px",padding:"24px",maxWidth:"500px",width:"90%"},children:[e.jsxs("h2",{style:{fontSize:"20px",fontWeight:"600",marginBottom:"20px"},children:["Upload ",d.charAt(0).toUpperCase()+d.slice(1)," Photos"]}),e.jsxs("div",{style:{border:"2px dashed #E5E7EB",borderRadius:"8px",padding:"40px",textAlign:"center",marginBottom:"20px"},children:[e.jsx("input",{type:"file",id:"photo-upload",multiple:!0,accept:"image/*",onChange:j,style:{display:"none"}}),e.jsxs("label",{htmlFor:"photo-upload",style:{cursor:"pointer",display:"block"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"📁"}),e.jsx("p",{style:{fontSize:"16px",fontWeight:"500",color:"#3B82F6",margin:"0 0 8px 0"},children:"Click to select photos"}),e.jsx("p",{style:{fontSize:"14px",color:"#6B7280",margin:0},children:"or drag and drop them here"})]})]}),e.jsx("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:e.jsx("button",{onClick:()=>c(!1),style:{padding:"8px 16px",backgroundColor:"#E5E7EB",color:"#374151",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px"},children:"Cancel"})})]})})]})};export{D as default};
//# sourceMappingURL=JobPhotos-HNxj0MFG.js.map
