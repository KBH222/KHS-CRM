{"version":3,"file":"JobPhotos-HNxj0MFG.js","sources":["../../src/pages/JobPhotos.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { calendarJobStorage } from '../utils/localStorage';\n\nconst JobPhotos = () => {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const [job, setJob] = useState(null);\n  const [photos, setPhotos] = useState({\n    before: [],\n    during: [],\n    after: []\n  });\n  const [activeTab, setActiveTab] = useState('before');\n  const [showUploadModal, setShowUploadModal] = useState(false);\n  const [uploadType, setUploadType] = useState('before');\n\n  useEffect(() => {\n    // Load job details\n    const allJobs = calendarJobStorage.getAll();\n    const foundJob = allJobs.find(j => j.id === id);\n    if (foundJob) {\n      setJob(foundJob);\n      // Load photos from localStorage\n      const savedPhotos = localStorage.getItem(`job_photos_${id}`);\n      if (savedPhotos) {\n        setPhotos(JSON.parse(savedPhotos));\n      }\n    }\n  }, [id]);\n\n  const handleFileUpload = (e) => {\n    const files = Array.from(e.target.files);\n    const newPhotos = [];\n\n    files.forEach((file) => {\n      const reader = new FileReader();\n      reader.onload = (event) => {\n        const photo = {\n          id: Date.now() + Math.random(),\n          url: event.target.result,\n          name: file.name,\n          uploadDate: new Date().toISOString(),\n          type: uploadType\n        };\n        newPhotos.push(photo);\n        \n        if (newPhotos.length === files.length) {\n          const updatedPhotos = {\n            ...photos,\n            [uploadType]: [...photos[uploadType], ...newPhotos]\n          };\n          setPhotos(updatedPhotos);\n          // Save to localStorage\n          localStorage.setItem(`job_photos_${id}`, JSON.stringify(updatedPhotos));\n          setShowUploadModal(false);\n        }\n      };\n      reader.readAsDataURL(file);\n    });\n  };\n\n  const handleDeletePhoto = (type, photoId) => {\n    if (confirm('Are you sure you want to delete this photo?')) {\n      const updatedPhotos = {\n        ...photos,\n        [type]: photos[type].filter(p => p.id !== photoId)\n      };\n      setPhotos(updatedPhotos);\n      localStorage.setItem(`job_photos_${id}`, JSON.stringify(updatedPhotos));\n    }\n  };\n\n  if (!job) {\n    return <div style={{ padding: '20px' }}>Loading...</div>;\n  }\n\n  const tabs = [\n    { id: 'before', label: 'Before', count: photos.before.length },\n    { id: 'during', label: 'During', count: photos.during.length },\n    { id: 'after', label: 'After', count: photos.after.length }\n  ];\n\n  return (\n    <div style={{ maxWidth: '1200px', margin: '0 auto', padding: '20px' }}>\n      {/* Header */}\n      <div style={{ marginBottom: '20px' }}>\n        <button\n          onClick={() => navigate('/schedule')}\n          style={{\n            marginBottom: '15px',\n            padding: '8px 16px',\n            backgroundColor: '#E5E7EB',\n            border: 'none',\n            borderRadius: '6px',\n            cursor: 'pointer',\n            fontSize: '14px'\n          }}\n        >\n          ‚Üê Back to Schedule\n        </button>\n\n        <div style={{ \n          display: 'flex', \n          justifyContent: 'space-between', \n          alignItems: 'center',\n          marginBottom: '20px'\n        }}>\n          <div>\n            <h1 style={{ fontSize: '24px', fontWeight: 'bold', margin: '0 0 8px 0' }}>\n              Job Photos\n            </h1>\n            <p style={{ color: '#6B7280', margin: 0 }}>\n              {job.title} - {job.customerName}\n            </p>\n          </div>\n          <button\n            onClick={() => {\n              setUploadType(activeTab);\n              setShowUploadModal(true);\n            }}\n            style={{\n              padding: '8px 16px',\n              backgroundColor: '#3B82F6',\n              color: 'white',\n              border: 'none',\n              borderRadius: '6px',\n              cursor: 'pointer',\n              fontSize: '14px'\n            }}\n          >\n            + Upload Photos\n          </button>\n        </div>\n      </div>\n\n      {/* Tabs */}\n      <div style={{ \n        display: 'flex', \n        gap: '2px',\n        backgroundColor: '#E5E7EB',\n        padding: '2px',\n        borderRadius: '8px',\n        marginBottom: '20px'\n      }}>\n        {tabs.map(tab => (\n          <button\n            key={tab.id}\n            onClick={() => setActiveTab(tab.id)}\n            style={{\n              flex: 1,\n              padding: '10px 16px',\n              backgroundColor: activeTab === tab.id ? 'white' : 'transparent',\n              border: 'none',\n              borderRadius: '6px',\n              cursor: 'pointer',\n              fontSize: '14px',\n              fontWeight: activeTab === tab.id ? '600' : '400',\n              color: activeTab === tab.id ? '#111827' : '#6B7280',\n              transition: 'all 0.2s',\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n              gap: '8px'\n            }}\n          >\n            {tab.label}\n            {tab.count > 0 && (\n              <span style={{\n                backgroundColor: activeTab === tab.id ? '#3B82F6' : '#9CA3AF',\n                color: 'white',\n                borderRadius: '12px',\n                padding: '2px 8px',\n                fontSize: '12px',\n                fontWeight: '500'\n              }}>\n                {tab.count}\n              </span>\n            )}\n          </button>\n        ))}\n      </div>\n\n      {/* Photo Grid */}\n      <div style={{\n        backgroundColor: 'white',\n        borderRadius: '8px',\n        padding: '20px',\n        boxShadow: '0 1px 3px rgba(0,0,0,0.1)'\n      }}>\n        {photos[activeTab].length === 0 ? (\n          <div style={{\n            textAlign: 'center',\n            padding: '60px 20px',\n            color: '#9CA3AF'\n          }}>\n            <div style={{ fontSize: '48px', marginBottom: '16px' }}>üì∑</div>\n            <p style={{ fontSize: '16px', margin: '0 0 8px 0' }}>\n              No {activeTab} photos yet\n            </p>\n            <p style={{ fontSize: '14px', margin: 0 }}>\n              Click \"Upload Photos\" to add some\n            </p>\n          </div>\n        ) : (\n          <div style={{\n            display: 'grid',\n            gridTemplateColumns: 'repeat(auto-fill, minmax(250px, 1fr))',\n            gap: '16px'\n          }}>\n            {photos[activeTab].map(photo => (\n              <div\n                key={photo.id}\n                style={{\n                  position: 'relative',\n                  borderRadius: '8px',\n                  overflow: 'hidden',\n                  border: '1px solid #E5E7EB',\n                  backgroundColor: '#F9FAFB'\n                }}\n              >\n                <img\n                  src={photo.url}\n                  alt={photo.name}\n                  style={{\n                    width: '100%',\n                    height: '200px',\n                    objectFit: 'cover',\n                    cursor: 'pointer'\n                  }}\n                  onClick={() => window.open(photo.url, '_blank')}\n                />\n                <div style={{\n                  padding: '12px',\n                  borderTop: '1px solid #E5E7EB'\n                }}>\n                  <p style={{\n                    fontSize: '14px',\n                    fontWeight: '500',\n                    margin: '0 0 4px 0',\n                    whiteSpace: 'nowrap',\n                    overflow: 'hidden',\n                    textOverflow: 'ellipsis'\n                  }}>\n                    {photo.name}\n                  </p>\n                  <p style={{\n                    fontSize: '12px',\n                    color: '#6B7280',\n                    margin: 0\n                  }}>\n                    {new Date(photo.uploadDate).toLocaleDateString()}\n                  </p>\n                </div>\n                <button\n                  onClick={() => handleDeletePhoto(activeTab, photo.id)}\n                  style={{\n                    position: 'absolute',\n                    top: '8px',\n                    right: '8px',\n                    width: '32px',\n                    height: '32px',\n                    backgroundColor: 'rgba(0,0,0,0.5)',\n                    color: 'white',\n                    border: 'none',\n                    borderRadius: '4px',\n                    cursor: 'pointer',\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                    fontSize: '16px'\n                  }}\n                  title=\"Delete photo\"\n                >\n                  √ó\n                </button>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n\n      {/* Upload Modal */}\n      {showUploadModal && (\n        <div style={{\n          position: 'fixed',\n          top: 0,\n          left: 0,\n          right: 0,\n          bottom: 0,\n          backgroundColor: 'rgba(0, 0, 0, 0.5)',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          zIndex: 50\n        }}>\n          <div style={{\n            backgroundColor: 'white',\n            borderRadius: '8px',\n            padding: '24px',\n            maxWidth: '500px',\n            width: '90%'\n          }}>\n            <h2 style={{ fontSize: '20px', fontWeight: '600', marginBottom: '20px' }}>\n              Upload {uploadType.charAt(0).toUpperCase() + uploadType.slice(1)} Photos\n            </h2>\n            \n            <div style={{\n              border: '2px dashed #E5E7EB',\n              borderRadius: '8px',\n              padding: '40px',\n              textAlign: 'center',\n              marginBottom: '20px'\n            }}>\n              <input\n                type=\"file\"\n                id=\"photo-upload\"\n                multiple\n                accept=\"image/*\"\n                onChange={handleFileUpload}\n                style={{ display: 'none' }}\n              />\n              <label\n                htmlFor=\"photo-upload\"\n                style={{\n                  cursor: 'pointer',\n                  display: 'block'\n                }}\n              >\n                <div style={{ fontSize: '48px', marginBottom: '16px' }}>üìÅ</div>\n                <p style={{\n                  fontSize: '16px',\n                  fontWeight: '500',\n                  color: '#3B82F6',\n                  margin: '0 0 8px 0'\n                }}>\n                  Click to select photos\n                </p>\n                <p style={{\n                  fontSize: '14px',\n                  color: '#6B7280',\n                  margin: 0\n                }}>\n                  or drag and drop them here\n                </p>\n              </label>\n            </div>\n\n            <div style={{ display: 'flex', gap: '12px', justifyContent: 'flex-end' }}>\n              <button\n                onClick={() => setShowUploadModal(false)}\n                style={{\n                  padding: '8px 16px',\n                  backgroundColor: '#E5E7EB',\n                  color: '#374151',\n                  border: 'none',\n                  borderRadius: '6px',\n                  cursor: 'pointer',\n                  fontSize: '14px'\n                }}\n              >\n                Cancel\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default JobPhotos;"],"names":["JobPhotos","id","useParams","navigate","useNavigate","job","setJob","useState","photos","setPhotos","activeTab","setActiveTab","showUploadModal","setShowUploadModal","uploadType","setUploadType","useEffect","foundJob","calendarJobStorage","j","savedPhotos","handleFileUpload","e","files","newPhotos","file","reader","event","photo","updatedPhotos","handleDeletePhoto","type","photoId","p","tabs","jsxs","jsx","tab"],"mappings":"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"}