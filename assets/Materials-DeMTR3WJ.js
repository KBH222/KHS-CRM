import{j as e}from"./ui-vendor-DuzoyoLP.js";import{u as v,r as n}from"./react-vendor-BLXwT7zj.js";const E=()=>{const a=v(),[x,f]=n.useState([]),[u,j]=n.useState({}),[r,b]=n.useState("store"),[p,y]=n.useState("all"),[i,m]=n.useState("");n.useEffect(()=>{(()=>{const s=[],o=localStorage.getItem("khs-crm-jobs");(o?JSON.parse(o):[]).forEach(d=>{const g=localStorage.getItem(`job_materials_${d.id}`);g&&JSON.parse(g).forEach(C=>{s.push({...C,jobId:d.id,jobTitle:d.title,customerName:d.customerName})})}),f(s)})()},[]),n.useEffect(()=>{const t={};x.forEach(s=>{const o=r==="store"?s.store:s.jobTitle;t[o]||(t[o]={items:[],total:0,count:0}),t[o].items.push(s),t[o].total+=s.total,t[o].count+=s.quantity}),j(t)},[x,r]);const c=x.filter(t=>{const s=t.name.toLowerCase().includes(i.toLowerCase())||t.jobTitle.toLowerCase().includes(i.toLowerCase())||t.customerName.toLowerCase().includes(i.toLowerCase()),o=p==="all"||t.store===p;return s&&o}),h=[...new Set(x.map(t=>t.store))],S=c.reduce((t,s)=>t+s.total,0);return e.jsx("div",{style:{height:"100%",overflowY:"auto",WebkitOverflowScrolling:"touch",paddingBottom:"100px"},children:e.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"20px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("button",{onClick:()=>a("/dashboard"),style:{background:"none",border:"none",padding:"8px",cursor:"pointer",display:"flex",alignItems:"center",color:"#6B7280",borderRadius:"6px"},onMouseEnter:t=>t.currentTarget.style.backgroundColor="#F3F4F6",onMouseLeave:t=>t.currentTarget.style.backgroundColor="transparent",children:e.jsx("svg",{style:{width:"28px",height:"28px"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:"24px",fontWeight:"bold",margin:"0 0 8px 0"},children:"Master Materials List"}),e.jsx("p",{style:{color:"#6B7280",margin:0},children:"All materials from all jobs in one place"})]})]}),e.jsx("button",{onClick:()=>a("/jobs"),style:{padding:"10px 20px",backgroundColor:"#3B82F6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:"View Jobs"})]}),e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"8px",padding:"16px",marginBottom:"24px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",display:"flex",gap:"16px",alignItems:"center",flexWrap:"wrap"},children:[e.jsx("div",{style:{flex:"1 1 300px"},children:e.jsx("input",{type:"text",placeholder:"Search materials, jobs, or customers...",value:i,onChange:t=>m(t.target.value),style:{width:"100%",padding:"10px",border:"1px solid #E5E7EB",borderRadius:"6px",fontSize:"14px"}})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("label",{style:{fontSize:"14px",fontWeight:"500",color:"#374151"},children:"Store:"}),e.jsxs("select",{value:p,onChange:t=>y(t.target.value),style:{padding:"8px 12px",border:"1px solid #E5E7EB",borderRadius:"6px",fontSize:"14px",cursor:"pointer"},children:[e.jsx("option",{value:"all",children:"All Stores"}),h.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("label",{style:{fontSize:"14px",fontWeight:"500",color:"#374151"},children:"Group by:"}),e.jsxs("select",{value:r,onChange:t=>b(t.target.value),style:{padding:"8px 12px",border:"1px solid #E5E7EB",borderRadius:"6px",fontSize:"14px",cursor:"pointer"},children:[e.jsx("option",{value:"store",children:"Store"}),e.jsx("option",{value:"job",children:"Job"})]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"16px",marginBottom:"24px"},children:[e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"8px",padding:"20px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",borderLeft:"4px solid #3B82F6"},children:[e.jsx("h3",{style:{fontSize:"14px",color:"#6B7280",margin:"0 0 8px 0",fontWeight:"500"},children:"Total Materials"}),e.jsx("p",{style:{fontSize:"28px",fontWeight:"bold",margin:"0",color:"#111827"},children:c.length}),e.jsx("p",{style:{fontSize:"12px",color:"#9CA3AF",marginTop:"4px"},children:"Unique items"})]}),e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"8px",padding:"20px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",borderLeft:"4px solid #10B981"},children:[e.jsx("h3",{style:{fontSize:"14px",color:"#6B7280",margin:"0 0 8px 0",fontWeight:"500"},children:"Total Cost"}),e.jsxs("p",{style:{fontSize:"28px",fontWeight:"bold",margin:"0",color:"#111827"},children:["$",S.toFixed(2)]}),e.jsx("p",{style:{fontSize:"12px",color:"#9CA3AF",marginTop:"4px"},children:"All materials"})]}),e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"8px",padding:"20px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",borderLeft:"4px solid #8B5CF6"},children:[e.jsx("h3",{style:{fontSize:"14px",color:"#6B7280",margin:"0 0 8px 0",fontWeight:"500"},children:"Stores"}),e.jsx("p",{style:{fontSize:"28px",fontWeight:"bold",margin:"0",color:"#111827"},children:h.length}),e.jsx("p",{style:{fontSize:"12px",color:"#9CA3AF",marginTop:"4px"},children:"Different suppliers"})]})]}),Object.entries(u).map(([t,s])=>e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"8px",marginBottom:"16px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"16px",backgroundColor:"#F9FAFB",borderBottom:"1px solid #E5E7EB",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",margin:"0",color:"#111827"},children:t}),e.jsxs("p",{style:{fontSize:"14px",color:"#6B7280",margin:"4px 0 0 0"},children:[s.items.length," items â€¢ Total: $",s.total.toFixed(2)]})]}),r==="job"&&e.jsx("button",{onClick:()=>{const o=x.find(l=>l.jobTitle===t);o&&o.jobId&&a(`/jobs/${o.jobId}`)},style:{padding:"6px 12px",backgroundColor:"#E5E7EB",color:"#374151",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"View Job"})]}),e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"1px solid #E5E7EB"},children:[e.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#6B7280"},children:"Material"}),e.jsx("th",{style:{padding:"12px 16px",textAlign:"center",fontSize:"12px",fontWeight:"600",color:"#6B7280"},children:"Quantity"}),e.jsx("th",{style:{padding:"12px 16px",textAlign:"center",fontSize:"12px",fontWeight:"600",color:"#6B7280"},children:"Unit"}),r==="store"&&e.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontSize:"12px",fontWeight:"600",color:"#6B7280"},children:"Job"}),r==="job"&&e.jsx("th",{style:{padding:"12px 16px",textAlign:"center",fontSize:"12px",fontWeight:"600",color:"#6B7280"},children:"Store"}),e.jsx("th",{style:{padding:"12px 16px",textAlign:"right",fontSize:"12px",fontWeight:"600",color:"#6B7280"},children:"Price/Unit"}),e.jsx("th",{style:{padding:"12px 16px",textAlign:"right",fontSize:"12px",fontWeight:"600",color:"#6B7280"},children:"Total"})]})}),e.jsx("tbody",{children:s.items.filter(o=>{const l=o.name.toLowerCase().includes(i.toLowerCase())||o.jobTitle.toLowerCase().includes(i.toLowerCase())||o.customerName.toLowerCase().includes(i.toLowerCase()),d=p==="all"||o.store===p;return l&&d}).map((o,l)=>e.jsxs("tr",{style:{borderBottom:l<s.items.length-1?"1px solid #F3F4F6":"none"},children:[e.jsx("td",{style:{padding:"16px",fontSize:"14px",color:"#111827"},children:o.name}),e.jsx("td",{style:{padding:"16px",textAlign:"center",fontSize:"14px",color:"#374151"},children:o.quantity}),e.jsx("td",{style:{padding:"16px",textAlign:"center",fontSize:"14px",color:"#374151"},children:o.unit}),r==="store"&&e.jsx("td",{style:{padding:"16px",fontSize:"14px",color:"#374151"},children:e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"500"},children:o.jobTitle}),e.jsx("div",{style:{fontSize:"12px",color:"#6B7280"},children:o.customerName})]})}),r==="job"&&e.jsx("td",{style:{padding:"16px",textAlign:"center",fontSize:"14px"},children:e.jsx("span",{style:{padding:"4px 8px",backgroundColor:o.store==="Home Depot"?"#FEF3C7":o.store==="Lowes"?"#DBEAFE":"#E5E7EB",color:o.store==="Home Depot"?"#92400E":o.store==="Lowes"?"#1E3A8A":"#374151",borderRadius:"4px",fontSize:"12px",fontWeight:"500"},children:o.store})}),e.jsxs("td",{style:{padding:"16px",textAlign:"right",fontSize:"14px",color:"#374151"},children:["$",o.price.toFixed(2)]}),e.jsxs("td",{style:{padding:"16px",textAlign:"right",fontSize:"14px",fontWeight:"600",color:"#111827"},children:["$",o.total.toFixed(2)]})]},o.id))})]})]},t))]})})};export{E as default};
//# sourceMappingURL=Materials-DeMTR3WJ.js.map
