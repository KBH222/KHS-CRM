import{j as e}from"./ui-vendor-DuzoyoLP.js";import{u as R,r as p}from"./react-vendor-BLXwT7zj.js";import{w as c,a as A}from"./worker.service-fRvciyjk.js";const J=()=>{const j=R(),[T,k]=p.useState([]),[E,m]=p.useState(!1),[d,v]=p.useState(null),[n,h]=p.useState("info"),[i,x]=p.useState({name:"",fullName:"",phone:"",email:"",specialty:"",status:"Available",color:"",notes:""}),[r,y]=p.useState({Mon:{startTime:"",endTime:"",lunchMinutes:30,job:"",workType:"",totalHours:0},Tue:{startTime:"",endTime:"",lunchMinutes:30,job:"",workType:"",totalHours:0},Wed:{startTime:"",endTime:"",lunchMinutes:30,job:"",workType:"",totalHours:0},Thu:{startTime:"",endTime:"",lunchMinutes:30,job:"",workType:"",totalHours:0},Fri:{startTime:"",endTime:"",lunchMinutes:30,job:"",workType:"",totalHours:0},Sat:{startTime:"",endTime:"",lunchMinutes:0,job:"",workType:"",totalHours:0},Sun:{startTime:"",endTime:"",lunchMinutes:0,job:"",workType:"",totalHours:0}});p.useEffect(()=>{f()},[]);const f=()=>{k(c.getAll())},C=()=>{v(null),h("info"),x({name:"",fullName:"",phone:"",email:"",specialty:"",status:"Available",color:c.getNextColor(),notes:""}),m(!0)},W=t=>{v(t),h("info"),x({name:t.name,fullName:t.fullName,phone:t.phone,email:t.email,specialty:t.specialty,status:t.status,color:t.color,notes:t.notes||""}),m(!0)},S=t=>{confirm("Are you sure you want to delete this worker?")&&(c.delete(t),f())},D=t=>{t.preventDefault(),d?c.update(d.id,{...i,timesheet:r}):c.create({...i,currentJob:null,timesheet:r}),m(!1),f()},u=t=>{const{name:o,value:l}=t.target;x(s=>({...s,[o]:l}))},w=t=>{const{name:o,value:l}=t.target;x(s=>({...s,[o]:l}))},z=(t,o,l)=>{if(!t||!o)return 0;const s=new Date(`2000-01-01T${t}`),a=new Date(`2000-01-01T${o}`);a<s&&a.setDate(a.getDate()+1);const M=(a.getTime()-s.getTime())/(1e3*60*60),H=l/60;return Math.max(0,M-H)},g=(t,o,l)=>{y(s=>{const a={...s,[t]:{...s[t],[o]:l}};if(o==="startTime"||o==="endTime"||o==="lunchMinutes"){const b=a[t];a[t].totalHours=z(b.startTime,b.endTime,b.lunchMinutes)}return a})},B=()=>Object.values(r).reduce((t,o)=>t+o.totalHours,0);p.useEffect(()=>{d&&d.timesheet?y(d.timesheet):y({Mon:{startTime:"",endTime:"",lunchMinutes:30,job:"",workType:"",totalHours:0},Tue:{startTime:"",endTime:"",lunchMinutes:30,job:"",workType:"",totalHours:0},Wed:{startTime:"",endTime:"",lunchMinutes:30,job:"",workType:"",totalHours:0},Thu:{startTime:"",endTime:"",lunchMinutes:30,job:"",workType:"",totalHours:0},Fri:{startTime:"",endTime:"",lunchMinutes:30,job:"",workType:"",totalHours:0},Sat:{startTime:"",endTime:"",lunchMinutes:0,job:"",workType:"",totalHours:0},Sun:{startTime:"",endTime:"",lunchMinutes:0,job:"",workType:"",totalHours:0}})},[d]);const F=t=>{const o=c.formatPhone(t.target.value);x(l=>({...l,phone:o}))};return e.jsxs("div",{style:{height:"100%",overflowY:"auto",WebkitOverflowScrolling:"touch",paddingBottom:"100px"},children:[e.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"20px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("button",{onClick:()=>j("/dashboard"),style:{background:"none",border:"none",padding:"8px",cursor:"pointer",display:"flex",alignItems:"center",color:"#6B7280",borderRadius:"6px"},onMouseEnter:t=>t.currentTarget.style.backgroundColor="#F3F4F6",onMouseLeave:t=>t.currentTarget.style.backgroundColor="transparent",children:e.jsx("svg",{style:{width:"28px",height:"28px"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("h1",{style:{fontSize:"24px",fontWeight:"bold",margin:0},children:"Workers"})]}),e.jsxs("button",{onClick:C,style:{padding:"10px 20px",backgroundColor:"#3B82F6",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("svg",{style:{width:"20px",height:"20px"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Worker"]})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(350px, 1fr))",gap:"20px"},children:T.map(t=>e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"8px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",padding:"20px",borderTop:`4px solid ${t.color}`},children:[e.jsx("div",{style:{marginBottom:"16px"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[e.jsx("div",{style:{width:"48px",height:"48px",backgroundColor:t.color,color:"white",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",fontWeight:"bold"},children:t.name}),e.jsxs("div",{style:{flex:1},children:[e.jsx("h2",{style:{margin:0,fontSize:"18px",fontWeight:"600"},children:t.fullName}),e.jsx("span",{style:{display:"inline-block",padding:"2px 8px",backgroundColor:t.status==="Available"?"#D1FAE5":t.status==="On Job"?"#FEE2E2":"#F3F4F6",color:t.status==="Available"?"#065F46":t.status==="On Job"?"#991B1B":"#374151",borderRadius:"12px",fontSize:"12px",fontWeight:"500"},children:t.status})]}),t.notes&&e.jsxs("div",{title:"Has notes",style:{padding:"4px 8px",backgroundColor:"#FEF3C7",color:"#92400E",borderRadius:"4px",fontSize:"12px",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsxs("svg",{style:{width:"14px",height:"14px"},fill:"currentColor",viewBox:"0 0 20 20",children:[e.jsx("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),e.jsx("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 1 1 0 000 2H6a2 2 0 00-2 2v6a2 2 0 002 2h2a1 1 0 100 2H6a4 4 0 01-4-4V5a4 4 0 014-4 1 1 0 001-1h2a1 1 0 110 2H7a1 1 0 00-1 1zm5 4a1 1 0 11-2 0 1 1 0 012 0zm3 1a1 1 0 100-2 1 1 0 000 2zm3 1a1 1 0 11-2 0 1 1 0 012 0z",clipRule:"evenodd"})]}),"Notes"]}),e.jsxs("div",{style:{display:"flex",gap:"4px"},children:[e.jsx("button",{onClick:()=>W(t),style:{background:"none",border:"none",padding:"6px",cursor:"pointer",color:"#6B7280",borderRadius:"4px"},onMouseEnter:o=>o.currentTarget.style.backgroundColor="#F3F4F6",onMouseLeave:o=>o.currentTarget.style.backgroundColor="transparent",title:"Edit worker",children:e.jsx("svg",{style:{width:"20px",height:"20px"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{onClick:()=>S(t.id),style:{background:"none",border:"none",padding:"6px",cursor:"pointer",color:"#EF4444",borderRadius:"4px"},onMouseEnter:o=>o.currentTarget.style.backgroundColor="#FEE2E2",onMouseLeave:o=>o.currentTarget.style.backgroundColor="transparent",title:"Delete worker",children:e.jsx("svg",{style:{width:"20px",height:"20px"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})}),e.jsxs("div",{style:{fontSize:"14px",color:"#6B7280",marginBottom:"12px"},children:[e.jsxs("div",{style:{marginBottom:"4px"},children:[e.jsx("strong",{children:"Specialty:"})," ",t.specialty]}),e.jsxs("div",{style:{marginBottom:"4px"},children:[e.jsx("strong",{children:"Phone:"})," ",e.jsx("a",{href:`tel:${t.phone.replace(/\D/g,"")}`,style:{color:"#3B82F6",textDecoration:"none"},children:t.phone})]}),e.jsxs("div",{style:{marginBottom:"4px"},children:[e.jsx("strong",{children:"Email:"})," ",e.jsx("a",{href:`mailto:${t.email}`,style:{color:"#3B82F6",textDecoration:"none"},children:t.email})]}),t.currentJob&&e.jsxs("div",{style:{marginTop:"8px",padding:"8px",backgroundColor:"#F3F4F6",borderRadius:"6px"},children:[e.jsx("strong",{children:"Current Job:"})," ",t.currentJob]})]}),e.jsx("button",{onClick:()=>j("/schedule"),style:{width:"100%",padding:"8px",backgroundColor:"#3B82F6",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px"},children:"View Schedule"})]},t.id))})]}),E&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"24px",width:"100%",maxWidth:"900px",maxHeight:"90vh",overflowY:"auto"},children:[e.jsx("h2",{style:{marginTop:0,marginBottom:"20px"},children:d?"Edit Worker":"Add New Worker"}),e.jsxs("div",{style:{display:"flex",borderBottom:"2px solid #E5E7EB",marginBottom:"20px"},children:[e.jsx("button",{type:"button",onClick:()=>h("info"),style:{padding:"10px 20px",background:"none",border:"none",borderBottom:n==="info"?"2px solid #3B82F6":"2px solid transparent",color:n==="info"?"#3B82F6":"#6B7280",fontWeight:n==="info"?"600":"400",cursor:"pointer",marginBottom:"-2px",transition:"all 0.2s"},children:"Info"}),e.jsx("button",{type:"button",onClick:()=>h("notes"),style:{padding:"10px 20px",background:"none",border:"none",borderBottom:n==="notes"?"2px solid #3B82F6":"2px solid transparent",color:n==="notes"?"#3B82F6":"#6B7280",fontWeight:n==="notes"?"600":"400",cursor:"pointer",marginBottom:"-2px",transition:"all 0.2s"},children:"Notes"}),e.jsx("button",{type:"button",onClick:()=>h("hours"),style:{padding:"10px 20px",background:"none",border:"none",borderBottom:n==="hours"?"2px solid #3B82F6":"2px solid transparent",color:n==="hours"?"#3B82F6":"#6B7280",fontWeight:n==="hours"?"600":"400",cursor:"pointer",marginBottom:"-2px",transition:"all 0.2s"},children:"Hours"})]}),e.jsxs("form",{onSubmit:D,children:[n==="info"&&e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:"500"},children:"Initials/Short Name"}),e.jsx("input",{type:"text",name:"name",value:i.name,onChange:u,required:!0,placeholder:"e.g., KBH",style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"16px"}})]}),e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:"500"},children:"Full Name"}),e.jsx("input",{type:"text",name:"fullName",value:i.fullName,onChange:u,required:!0,placeholder:"e.g., Keith B. Henderson",style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"16px"}})]}),e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:"500"},children:"Phone"}),e.jsx("input",{type:"tel",name:"phone",value:i.phone,onChange:F,required:!0,placeholder:"(555) 123-4567",style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"16px"}})]}),e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:"500"},children:"Email"}),e.jsx("input",{type:"email",name:"email",value:i.email,onChange:u,required:!0,placeholder:"worker@company.com",style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"16px"}})]}),e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:"500"},children:"Specialty"}),e.jsx("input",{type:"text",name:"specialty",value:i.specialty,onChange:u,required:!0,placeholder:"e.g., General Construction, Carpentry",style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"16px"}})]}),e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:"500"},children:"Status"}),e.jsxs("select",{name:"status",value:i.status,onChange:u,style:{width:"100%",padding:"8px 12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"16px",backgroundColor:"white"},children:[e.jsx("option",{value:"Available",children:"Available"}),e.jsx("option",{value:"On Job",children:"On Job"}),e.jsx("option",{value:"Off Duty",children:"Off Duty"})]})]}),e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500"},children:"Color"}),e.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:A.map(t=>e.jsx("button",{type:"button",onClick:()=>x(o=>({...o,color:t})),style:{width:"40px",height:"40px",backgroundColor:t,border:i.color===t?"3px solid #1F2937":"1px solid #D1D5DB",borderRadius:"6px",cursor:"pointer",position:"relative"},children:i.color===t&&e.jsx("svg",{style:{width:"20px",height:"20px",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"white"},fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})},t))})]})]}),n==="notes"&&e.jsx("div",{children:e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500"},children:"Worker Notes"}),e.jsx("textarea",{name:"notes",value:i.notes,onChange:w,placeholder:"Add any notes about this worker (certifications, availability, special skills, etc.)",style:{width:"100%",minHeight:"300px",padding:"12px",border:"1px solid #D1D5DB",borderRadius:"6px",fontSize:"16px",fontFamily:"inherit",resize:"vertical"}}),e.jsx("div",{style:{marginTop:"8px",fontSize:"14px",color:"#6B7280"},children:"Use this space to track important information about the worker."})]})}),n==="hours"&&e.jsx("div",{children:e.jsxs("div",{style:{backgroundColor:"#F9FAFB",borderRadius:"8px",padding:"16px",marginBottom:"20px"},children:[e.jsx("h4",{style:{margin:"0 0 16px 0",fontSize:"16px",fontWeight:"600"},children:"Weekly Timesheet"}),e.jsx("div",{style:{overflowX:"auto",overflowY:"hidden"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",minWidth:"800px"},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{textAlign:"left",padding:"8px",borderBottom:"2px solid #E5E7EB",fontSize:"14px",fontWeight:"600",color:"#374151",minWidth:"50px"},children:"Day"}),e.jsx("th",{style:{textAlign:"center",padding:"8px",borderBottom:"2px solid #E5E7EB",fontSize:"14px",fontWeight:"600",color:"#374151",minWidth:"80px"},children:"Start Time"}),e.jsx("th",{style:{textAlign:"center",padding:"8px",borderBottom:"2px solid #E5E7EB",fontSize:"14px",fontWeight:"600",color:"#374151",minWidth:"80px"},children:"End Time"}),e.jsx("th",{style:{textAlign:"center",padding:"8px",borderBottom:"2px solid #E5E7EB",fontSize:"14px",fontWeight:"600",color:"#374151",minWidth:"60px"},children:"Lunch (min)"}),e.jsx("th",{style:{textAlign:"left",padding:"8px",borderBottom:"2px solid #E5E7EB",fontSize:"14px",fontWeight:"600",color:"#374151",minWidth:"180px"},children:"Job/Customer"}),e.jsx("th",{style:{textAlign:"left",padding:"8px",borderBottom:"2px solid #E5E7EB",fontSize:"14px",fontWeight:"600",color:"#374151",minWidth:"140px"},children:"Type of Work"}),e.jsx("th",{style:{textAlign:"center",padding:"8px",borderBottom:"2px solid #E5E7EB",fontSize:"14px",fontWeight:"600",color:"#374151",minWidth:"80px"},children:"Total Hours"})]})}),e.jsx("tbody",{children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map(t=>e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"8px",borderBottom:"1px solid #E5E7EB",fontSize:"14px",color:"#374151"},children:t}),e.jsx("td",{style:{padding:"8px",borderBottom:"1px solid #E5E7EB"},children:e.jsx("input",{type:"time",value:r[t].startTime,onChange:o=>g(t,"startTime",o.target.value),style:{width:"100%",padding:"4px 8px",border:"1px solid #D1D5DB",borderRadius:"4px",fontSize:"14px"}})}),e.jsx("td",{style:{padding:"8px",borderBottom:"1px solid #E5E7EB"},children:e.jsx("input",{type:"time",value:r[t].endTime,onChange:o=>g(t,"endTime",o.target.value),style:{width:"100%",padding:"4px 8px",border:"1px solid #D1D5DB",borderRadius:"4px",fontSize:"14px"}})}),e.jsx("td",{style:{padding:"8px",borderBottom:"1px solid #E5E7EB"},children:e.jsx("input",{type:"number",min:"0",max:"120",step:"15",value:r[t].lunchMinutes,onChange:o=>g(t,"lunchMinutes",parseInt(o.target.value)||0),style:{width:"60px",padding:"4px 6px",border:"1px solid #D1D5DB",borderRadius:"4px",fontSize:"14px",textAlign:"center"}})}),e.jsx("td",{style:{padding:"8px",borderBottom:"1px solid #E5E7EB"},children:e.jsx("input",{type:"text",value:r[t].job,onChange:o=>g(t,"job",o.target.value),placeholder:"Select job...",style:{width:"100%",padding:"4px 8px",border:"1px solid #D1D5DB",borderRadius:"4px",fontSize:"14px"}})}),e.jsx("td",{style:{padding:"8px",borderBottom:"1px solid #E5E7EB"},children:e.jsxs("select",{value:r[t].workType,onChange:o=>g(t,"workType",o.target.value),style:{width:"100%",padding:"4px 8px",border:"1px solid #D1D5DB",borderRadius:"4px",fontSize:"14px",backgroundColor:"white"},children:[e.jsx("option",{value:"",children:"Select type..."}),e.jsx("option",{value:"carpentry",children:"Carpentry"}),e.jsx("option",{value:"painting",children:"Painting"}),e.jsx("option",{value:"drywall",children:"Drywall"}),e.jsx("option",{value:"demo",children:"Demo"}),e.jsx("option",{value:"flooring",children:"Flooring"}),e.jsx("option",{value:"plumbing",children:"Plumbing"}),e.jsx("option",{value:"electrical",children:"Electrical"}),e.jsx("option",{value:"roofing",children:"Roofing"}),e.jsx("option",{value:"other",children:"Other"})]})}),e.jsx("td",{style:{padding:"8px",borderBottom:"1px solid #E5E7EB",textAlign:"center",fontSize:"14px",fontWeight:"500",color:r[t].totalHours>0?"#059669":"#6B7280"},children:r[t].totalHours.toFixed(1)})]},t))}),e.jsx("tfoot",{children:e.jsxs("tr",{children:[e.jsx("td",{colSpan:6,style:{padding:"8px",borderTop:"2px solid #E5E7EB",fontSize:"14px",fontWeight:"600",color:"#374151",textAlign:"right"},children:"Weekly Total:"}),e.jsx("td",{style:{padding:"8px",borderTop:"2px solid #E5E7EB",textAlign:"center",fontSize:"16px",fontWeight:"700",color:B()>40?"#DC2626":"#059669"},children:B().toFixed(1)})]})})]})})]})}),e.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"20px"},children:[e.jsx("button",{type:"submit",style:{flex:1,padding:"10px",backgroundColor:"#3B82F6",color:"white",border:"none",borderRadius:"6px",fontSize:"16px",fontWeight:"500",cursor:"pointer"},children:d?"Save Changes":"Add Worker"}),e.jsx("button",{type:"button",onClick:()=>m(!1),style:{flex:1,padding:"10px",backgroundColor:"#E5E7EB",color:"#374151",border:"none",borderRadius:"6px",fontSize:"16px",fontWeight:"500",cursor:"pointer"},children:"Cancel"})]})]})]})})]})};export{J as default};
//# sourceMappingURL=Workers-CMRryk5J.js.map
